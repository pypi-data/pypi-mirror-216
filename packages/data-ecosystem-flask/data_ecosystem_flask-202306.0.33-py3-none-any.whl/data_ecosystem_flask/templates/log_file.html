<!DOCTYPE html>
<html>
  <head>
    <title>Data Ecosystem Log File</title>

    <style>
      .table-theme-blue thead th {
        background-color: #006778;
        color: white;
      }
    </style>

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <!-- DataTables CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.10.23/css/dataTables.bootstrap4.min.css"
    />
    <!-- jQuery, DataTables JS, Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.23/js/dataTables.bootstrap4.min.js"></script>
    <!-- DataTables initialization -->
    <script>
      $(document).ready(function () {
        var table = $("#logTable").DataTable();

        // Add a filter for log level
        $("#logLevelFilter").on("change", function () {
          table.column(3).search($(this).val()).draw();
        });
      });
    </script>
  </head>
  <body>
    <div class="container">
      <h2 class="mt-4">Log File</h2>

      <!-- Filter for log level -->
      <div class="form-group">
        <label for="logLevelFilter">Filter by Log Level:</label>
        <select id="logLevelFilter" class="form-control">
          <option value="">All</option>
          <option value="INFO">INFO</option>
          <option value="WARNING">WARNING</option>
          <option value="ERROR">ERROR</option>
        </select>
      </div>

      <table id="logTable" class="table table-striped table-theme-blue">
        <thead>
          <tr>
            <th scope="col">Date</th>
            <th scope="col">Time</th>
            <th scope="col">Line Number</th>
            <th scope="col">Level</th>
            <th scope="col">Message</th>
          </tr>
        </thead>
        <tbody>
          {% for entry in entries %}
          <tr>
            <td>{{ entry[0]}}</td>
            <td>{{ entry[1]}}</td>
            <td>{{ entry[2]}}</td>
            <td>{{ entry[3]}}</td>
            <td class="text-{{ entry[4].lower()}}">
              {{ entry[4]}} {{ ' '.join(entry[5:])}}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </body>
</html>
