import{c as J,d as K,r as j,p as Q,e as U,f as z,B as H,w as Z,h as ee,i as te,W as I,P as re,j as ne}from"./index.02694492.js";var X={exports:{}};(function(_,T){(function(x,f){_.exports=f()})(J,function(){return function x(f,b,c){var p=window,m="application/octet-stream",w=c||m,v=f,d=!b&&!c&&v,g=document.createElement("a"),P=function(n){return String(n)},h=p.Blob||p.MozBlob||p.WebKitBlob||P,l=b||"download",s,o;if(h=h.call?h.bind(p):Blob,String(this)==="true"&&(v=[v,w],w=v[0],v=v[1]),d&&d.length<2048&&(l=d.split("/").pop().split("?")[0],g.href=d,g.href.indexOf(d)!==-1)){var i=new XMLHttpRequest;return i.open("GET",d,!0),i.responseType="blob",i.onload=function(n){x(n.target.response,l,m)},setTimeout(function(){i.send()},0),i}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(v))if(v.length>1024*1024*1.999&&h!==P)v=u(v),w=v.type||m;else return navigator.msSaveBlob?navigator.msSaveBlob(u(v),l):e(v);else if(/([\x80-\xff])/.test(v)){var t=0,r=new Uint8Array(v.length),a=r.length;for(t;t<a;++t)r[t]=v.charCodeAt(t);v=new h([r],{type:w})}s=v instanceof h?v:new h([v],{type:w});function u(n){var y=n.split(/[:;,]/),k=y[1],O=y[2]=="base64"?atob:decodeURIComponent,C=O(y.pop()),R=C.length,E=0,S=new Uint8Array(R);for(E;E<R;++E)S[E]=C.charCodeAt(E);return new h([S],{type:k})}function e(n,y){if("download"in g)return g.href=n,g.setAttribute("download",l),g.className="download-js-link",g.innerHTML="downloading...",g.style.display="none",document.body.appendChild(g),setTimeout(function(){g.click(),document.body.removeChild(g),y===!0&&setTimeout(function(){p.URL.revokeObjectURL(g.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(n)&&(n="data:"+n.replace(/^data:([\w\/\-\+]+)/,m)),window.open(n)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=n),!0;var k=document.createElement("iframe");document.body.appendChild(k),!y&&/^data:/.test(n)&&(n="data:"+n.replace(/^data:([\w\/\-\+]+)/,m)),k.src=n,setTimeout(function(){document.body.removeChild(k)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(s,l);if(p.URL)e(p.URL.createObjectURL(s),!0);else{if(typeof s=="string"||s.constructor===P)try{return e("data:"+w+";base64,"+p.btoa(s))}catch{return e("data:"+w+","+encodeURIComponent(s))}o=new FileReader,o.onload=function(n){e(this.result)},o.readAsDataURL(s)}return!0}})})(X);const ae=X.exports;var Y={exports:{}};(function(_,T){(function(x,f){_.exports=f()})(window,function(){return function(x){var f={};function b(c){if(f[c])return f[c].exports;var p=f[c]={i:c,l:!1,exports:{}};return x[c].call(p.exports,p,p.exports,b),p.l=!0,p.exports}return b.m=x,b.c=f,b.d=function(c,p,m){b.o(c,p)||Object.defineProperty(c,p,{enumerable:!0,get:m})},b.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},b.t=function(c,p){if(1&p&&(c=b(c)),8&p||4&p&&typeof c=="object"&&c&&c.__esModule)return c;var m=Object.create(null);if(b.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:c}),2&p&&typeof c!="string")for(var w in c)b.d(m,w,function(v){return c[v]}.bind(null,w));return m},b.n=function(c){var p=c&&c.__esModule?function(){return c.default}:function(){return c};return b.d(p,"a",p),p},b.o=function(c,p){return Object.prototype.hasOwnProperty.call(c,p)},b.p="",b(b.s=4)}([function(x,f,b){Object.defineProperty(f,"__esModule",{value:!0}),Object.defineProperty(f,"ajax",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(f,"getId",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(f,"max",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(f,"min",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(f,"Observer",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(f,"extend",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(f,"style",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(f,"requestAnimationFrame",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(f,"frame",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(f,"debounce",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(f,"preventClick",{enumerable:!0,get:function(){return s.default}});var c=o(b(5)),p=o(b(6)),m=o(b(7)),w=o(b(8)),v=o(b(1)),d=o(b(9)),g=o(b(10)),P=o(b(2)),h=o(b(11)),l=o(b(12)),s=o(b(13));function o(i){return i&&i.__esModule?i:{default:i}}},function(x,f,b){function c(m,w){for(var v=0;v<w.length;v++){var d=w[v];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(m,d.key,d)}}Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var p=function(){function m(){(function(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")})(this,m),this.handlers=null}var w,v;return w=m,(v=[{key:"on",value:function(d,g){var P=this;this.handlers||(this.handlers={});var h=this.handlers[d];return h||(h=this.handlers[d]=[]),h.push(g),{name:d,callback:g,un:function(l,s){return P.un(l,s)}}}},{key:"un",value:function(d,g){if(this.handlers){var P,h=this.handlers[d];if(h)if(g)for(P=h.length-1;P>=0;P--)h[P]==g&&h.splice(P,1);else h.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(d,g){var P=this;return this.on(d,function h(){for(var l=arguments.length,s=new Array(l),o=0;o<l;o++)s[o]=arguments[o];g.apply(P,s),setTimeout(function(){P.un(d,h)},0)})}},{key:"fireEvent",value:function(d){for(var g=arguments.length,P=new Array(g>1?g-1:0),h=1;h<g;h++)P[h-1]=arguments[h];if(this.handlers){var l=this.handlers[d];l&&l.forEach(function(s){s.apply(void 0,P)})}}}])&&c(w.prototype,v),m}();f.default=p,x.exports=f.default},function(x,f,b){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var c=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(p,m){return setTimeout(p,1e3/60)}).bind(window);f.default=c,x.exports=f.default},function(x,f,b){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var c=function(i){if(i&&i.__esModule)return i;var t={};if(i!=null){for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(i,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=i[r]}}return t.default=i,t}(b(0));function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(i)}function m(i,t,r){return t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r,i}function w(i,t){return!t||p(t)!=="object"&&typeof t!="function"?function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(i):t}function v(i){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(i)}function d(i,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}function g(i,t,r){return t&&d(i.prototype,t),r&&d(i,r),i}function P(i,t){return(P=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r})(i,t)}var h="playing",l="paused",s="finished",o=function(i){function t(r){var a,u,e;return function(n,y){if(!(n instanceof y))throw new TypeError("Cannot call a class as a function")}(this,t),(e=w(this,v(t).call(this))).audioContext=null,e.offlineAudioContext=null,e.stateBehaviors=(m(a={},h,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var n=this.getDuration();return this.getCurrentTime()/n||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),m(a,l,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var n=this.getDuration();return this.getCurrentTime()/n||0},getCurrentTime:function(){return this.startPosition}}),m(a,s,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),a),e.params=r,e.ac=r.audioContext||e.getAudioContext(),e.lastPlay=e.ac.currentTime,e.startPosition=0,e.scheduledPause=null,e.states=(m(u={},h,Object.create(e.stateBehaviors[h])),m(u,l,Object.create(e.stateBehaviors[l])),m(u,s,Object.create(e.stateBehaviors[s])),u),e.analyser=null,e.buffer=null,e.filters=[],e.gainNode=null,e.mergedPeaks=null,e.offlineAc=null,e.peaks=null,e.playbackRate=1,e.analyser=null,e.scriptNode=null,e.source=null,e.splitPeaks=[],e.state=null,e.explicitDuration=r.duration,e}return function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&P(r,a)}(t,c.Observer),g(t,[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(r){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,r)),window.WaveSurferOfflineAudioContext}}]),g(t,[{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(l),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(r){r&&r.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(r){this.state!==this.states[r]&&(this.state=this.states[r],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];this.setFilters(a)}},{key:"setFilters",value:function(r){this.disconnectFilters(),r&&r.length&&(this.filters=r,this.analyser.disconnect(),r.reduce(function(a,u){return a.connect(u),u},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(t.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(t.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var r=this;this.scriptNode.onaudioprocess=function(){var a=r.getCurrentTime();a>=r.getDuration()?(r.setState(s),r.fireEvent("pause")):a>=r.scheduledPause?r.pause():r.state===r.states[h]&&r.fireEvent("audioprocess",a)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=function(){}}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(r){if(r){var a=new window.Audio;if(!a.setSinkId)return Promise.reject(new Error("setSinkId is not supported in your browser"));a.autoplay=!0;var u=this.ac.createMediaStreamDestination();return this.gainNode.disconnect(),this.gainNode.connect(u),a.srcObject=u.stream,a.setSinkId(r)}return Promise.reject(new Error("Invalid deviceId: "+r))}},{key:"setVolume",value:function(r){this.gainNode.gain.setValueAtTime(r,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(r,a,u){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),this.offlineAc.decodeAudioData(r,function(e){return a(e)},u)}},{key:"setPeaks",value:function(r,a){a!=null&&(this.explicitDuration=a),this.peaks=r}},{key:"setLength",value:function(r){if(!this.mergedPeaks||r!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var a,u=this.buffer?this.buffer.numberOfChannels:1;for(a=0;a<u;a++)this.splitPeaks[a]=[],this.splitPeaks[a][2*(r-1)]=0,this.splitPeaks[a][2*(r-1)+1]=0;this.mergedPeaks[2*(r-1)]=0,this.mergedPeaks[2*(r-1)+1]=0}}},{key:"getPeaks",value:function(r,a,u){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(a=a||0,u=u||r-1,this.setLength(r),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var e=this.createBuffer(1,4096,this.sampleRate);this.buffer=e.buffer}var n,y=this.buffer.length/r,k=~~(y/10)||1,O=this.buffer.numberOfChannels;for(n=0;n<O;n++){var C=this.splitPeaks[n],R=this.buffer.getChannelData(n),E=void 0;for(E=a;E<=u;E++){var S=~~(E*y),W=~~(S+y),A=0,M=0,D=void 0;for(D=S;D<W;D+=k){var B=R[D];B>M&&(M=B),B<A&&(A=B)}C[2*E]=M,C[2*E+1]=A,(n==0||M>this.mergedPeaks[2*E])&&(this.mergedPeaks[2*E]=M),(n==0||A<this.mergedPeaks[2*E+1])&&(this.mergedPeaks[2*E+1]=A)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&(typeof this.ac.close=="function"&&this.ac.state!="closed"&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null)}},{key:"load",value:function(r){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=r,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"isPaused",value:function(){return this.state!==this.states[h]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(r,a){if(this.buffer)return this.scheduledPause=null,r==null&&(r=this.getCurrentTime())>=this.getDuration()&&(r=0),a==null&&(a=this.getDuration()),this.startPosition=r,this.lastPlay=this.ac.currentTime,this.state===this.states[s]&&this.setState(l),{start:r,end:a}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(r,a){if(this.buffer){this.createSource();var u=this.seekTo(r,a);r=u.start,a=u.end,this.scheduledPause=a,this.source.start(0,r,a-r),this.ac.state=="suspended"&&this.ac.resume&&this.ac.resume(),this.setState(h),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(l),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(r){r=r||1,this.isPaused()?this.playbackRate=r:(this.pause(),this.playbackRate=r,this.play())}}]),t}();f.default=o,o.scriptBufferSize=256,x.exports=f.default},function(x,f,b){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var c=function(a){if(a&&a.__esModule)return a;var u={};if(a!=null){for(var e in a)if(Object.prototype.hasOwnProperty.call(a,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,e):{};n.get||n.set?Object.defineProperty(u,e,n):u[e]=a[e]}}return u.default=a,u}(b(0)),p=d(b(14)),m=d(b(3)),w=d(b(16)),v=d(b(17));function d(a){return a&&a.__esModule?a:{default:a}}function g(a){return(g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(a)}function P(a,u){return!u||g(u)!=="object"&&typeof u!="function"?l(a):u}function h(a){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(a)}function l(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function s(a,u){return(s=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(a,u)}function o(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")}function i(a,u){for(var e=0;e<u.length;e++){var n=u[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function t(a,u,e){return u&&i(a.prototype,u),e&&i(a,e),a}var r=function(a){function u(e){var n;if(o(this,u),(n=P(this,h(u).call(this))).defaultParams={audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,backend:"WebAudio",backgroundColor:null,barHeight:1,barGap:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:p.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,waveColor:"#999",xhr:{}},n.backends={MediaElement:w.default,WebAudio:m.default},n.util=c,n.params=c.extend({},n.defaultParams,e),n.container=typeof e.container=="string"?document.querySelector(n.params.container):n.params.container,!n.container)throw new Error("Container element not found");if(n.params.mediaContainer==null?n.mediaContainer=n.container:typeof n.params.mediaContainer=="string"?n.mediaContainer=document.querySelector(n.params.mediaContainer):n.mediaContainer=n.params.mediaContainer,!n.mediaContainer)throw new Error("Media Container element not found");if(n.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(n.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(n.params.rtl===!0&&c.style(n.container,{transform:"rotateY(180deg)"}),n.params.backgroundColor&&n.setBackgroundColor(n.params.backgroundColor),n.savedVolume=0,n.isMuted=!1,n.tmpEvents=[],n.currentAjax=null,n.arraybuffer=null,n.drawer=null,n.backend=null,n.peakCache=null,typeof n.params.renderer!="function")throw new Error("Renderer parameter is invalid");n.Drawer=n.params.renderer,n.Backend=n.backends[n.params.backend],n.initialisedPluginList={},n.isDestroyed=!1,n.isReady=!1;var y=0;return n._onResize=c.debounce(function(){y==n.drawer.wrapper.clientWidth||n.params.scrollParent||(y=n.drawer.wrapper.clientWidth,n.drawer.fireEvent("redraw"))},typeof n.params.responsive=="number"?n.params.responsive:100),P(n,l(n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&s(e,n)}(u,c.Observer),t(u,null,[{key:"create",value:function(e){return new u(e).init()}}]),t(u,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(e){var n=this;return e.forEach(function(y){return n.addPlugin(y)}),e.forEach(function(y){y.deferInit||n.initPlugin(y.name)}),this.fireEvent("plugins-registered",e),this}},{key:"addPlugin",value:function(e){var n=this;if(!e.name)throw new Error("Plugin does not have a name!");if(!e.instance)throw new Error("Plugin ".concat(e.name," does not have an instance property!"));e.staticProps&&Object.keys(e.staticProps).forEach(function(k){n[k]=e.staticProps[k]});var y=e.instance;return Object.getOwnPropertyNames(c.Observer.prototype).forEach(function(k){y.prototype[k]=c.Observer.prototype[k]}),this[e.name]=new y(e.params||{},this),this.fireEvent("plugin-added",e.name),this}},{key:"initPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet!"));return this.initialisedPluginList[e]&&this.destroyPlugin(e),this[e].init(),this.initialisedPluginList[e]=!0,this.fireEvent("plugin-initialised",e),this}},{key:"destroyPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[e])throw new Error("Plugin ".concat(e," is not active and cannot be destroyed!"));if(typeof this[e].destroy!="function")throw new Error("Plugin ".concat(e," does not have a destroy function!"));return this[e].destroy(),delete this.initialisedPluginList[e],this.fireEvent("plugin-destroyed",e),this}},{key:"destroyAllPlugins",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach(function(n){return e.destroyPlugin(n)})}},{key:"createDrawer",value:function(){var e=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),this.params.responsive!==!1&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())}),this.drawer.on("click",function(n,y){setTimeout(function(){return e.seekTo(y)},0)}),this.drawer.on("scroll",function(n){e.params.partialRender&&e.drawBuffer(),e.fireEvent("scroll",n)})}},{key:"createBackend",value:function(){var e=this;this.backend&&this.backend.destroy(),this.params.backend=="AudioElement"&&(this.params.backend="MediaElement"),this.params.backend!="WebAudio"||this.Backend.prototype.supportsWebAudio.call(null)||(this.params.backend="MediaElement"),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("finish")}),this.backend.on("play",function(){return e.fireEvent("play")}),this.backend.on("pause",function(){return e.fireEvent("pause")}),this.backend.on("audioprocess",function(n){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",n)})}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new v.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(e){e>=this.getDuration()?this.seekTo(1):this.seekTo(e/this.getDuration())}},{key:"play",value:function(e,n){var y=this;return this.fireEvent("interaction",function(){return y.play(e,n)}),this.backend.play(e,n)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:"skipForward",value:function(e){this.skip(e||this.params.skipLength)}},{key:"skip",value:function(e){var n=this.getDuration()||1,y=this.getCurrentTime()||0;y=Math.max(0,Math.min(n,y+(e||0))),this.seekAndCenter(y/n)}},{key:"seekAndCenter",value:function(e){this.seekTo(e),this.drawer.recenter(e)}},{key:"seekTo",value:function(e){var n=this;if(typeof e!="number"||!isFinite(e)||e<0||e>1)return console.error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return n.seekTo(e)});var y=this.backend.isPaused();y||this.backend.pause();var k=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(e),y||this.backend.play(),this.params.scrollParent=k,this.fireEvent("seek",e)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(e){return this.backend.setSinkId(e)}},{key:"setVolume",value:function(e){this.backend.setVolume(e),this.fireEvent("volume",e)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(e){this.backend.setPlaybackRate(e)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(e){e!==this.isMuted?(e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)):this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"isReady",value:function(){return this.isReady}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){return this.params.waveColor}},{key:"setWaveColor",value:function(e){this.params.waveColor=e,this.drawBuffer()}},{key:"getProgressColor",value:function(){return this.params.progressColor}},{key:"setProgressColor",value:function(e){this.params.progressColor=e,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(e){this.params.backgroundColor=e,c.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(e){this.params.cursorColor=e,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(e){this.params.height=e,this.drawer.setHeight(e*this.params.pixelRatio),this.drawBuffer()}},{key:"drawBuffer",value:function(){var e,n=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),y=this.drawer.getWidth(),k=n,O=0,C=Math.max(O+y,k);if(this.params.fillParent&&(!this.params.scrollParent||n<y)&&(O=0,C=k=y),this.params.partialRender){var R,E=this.peakCache.addRangeToPeakCache(k,O,C);for(R=0;R<E.length;R++)e=this.backend.getPeaks(k,E[R][0],E[R][1]),this.drawer.drawPeaks(e,k,E[R][0],E[R][1])}else e=this.backend.getPeaks(k,O,C),this.drawer.drawPeaks(e,k,O,C);this.fireEvent("redraw",e,k)}},{key:"zoom",value:function(e){e?(this.params.minPxPerSec=e,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)}},{key:"loadArrayBuffer",value:function(e){var n=this;this.decodeArrayBuffer(e,function(y){n.isDestroyed||n.loadDecodedBuffer(y)})}},{key:"loadDecodedBuffer",value:function(e){this.backend.load(e),this.drawBuffer(),this.fireEvent("ready"),this.isReady=!0}},{key:"loadBlob",value:function(e){var n=this,y=new FileReader;y.addEventListener("progress",function(k){return n.onProgress(k)}),y.addEventListener("load",function(k){return n.loadArrayBuffer(k.target.result)}),y.addEventListener("error",function(){return n.fireEvent("error","Error reading file")}),y.readAsArrayBuffer(e),this.empty()}},{key:"load",value:function(e,n,y,k){if(this.empty(),y){var O={"Preload is not 'auto', 'none' or 'metadata'":["auto","metadata","none"].indexOf(y)===-1,"Peaks are not provided":!n,"Backend is not of type MediaElement":this.params.backend!=="MediaElement","Url is not of type string":typeof e!="string"},C=Object.keys(O).filter(function(R){return O[R]});C.length&&(console.warn(`Preload parameter of wavesurfer.load will be ignored because:
	- `+C.join(`
	- `)),y=null)}switch(this.params.backend){case"WebAudio":return this.loadBuffer(e,n,k);case"MediaElement":return this.loadMediaElement(e,n,y,k)}}},{key:"loadBuffer",value:function(e,n,y){var k=this,O=function(C){return C&&k.tmpEvents.push(k.once("ready",C)),k.getArrayBuffer(e,function(R){return k.loadArrayBuffer(R)})};if(!n)return O();this.backend.setPeaks(n,y),this.drawBuffer(),this.tmpEvents.push(this.once("interaction",O))}},{key:"loadMediaElement",value:function(e,n,y,k){var O=this,C=e;if(typeof e=="string")this.backend.load(C,this.mediaContainer,n,y);else{var R=e;this.backend.loadElt(R,n),C=R.src}this.tmpEvents.push(this.backend.once("canplay",function(){O.drawBuffer(),O.fireEvent("ready"),O.isReady=!0}),this.backend.once("error",function(E){return O.fireEvent("error",E)})),n&&this.backend.setPeaks(n,k),n&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(C,function(E){O.decodeArrayBuffer(E,function(S){O.backend.buffer=S,O.backend.setPeaks(null),O.drawBuffer(),O.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(e,n){var y=this;this.arraybuffer=e,this.backend.decodeArrayBuffer(e,function(k){y.isDestroyed||y.arraybuffer!=e||(n(k),y.arraybuffer=null)},function(){return y.fireEvent("error","Error decoding audiobuffer")})}},{key:"getArrayBuffer",value:function(e,n){var y=this,k=c.ajax({url:e,responseType:"arraybuffer",xhr:this.params.xhr});return this.currentAjax=k,this.tmpEvents.push(k.on("progress",function(O){y.onProgress(O)}),k.on("success",function(O,C){n(O),y.currentAjax=null}),k.on("error",function(O){y.fireEvent("error","XHR error: "+O.target.statusText),y.currentAjax=null})),k}},{key:"onProgress",value:function(e){var n;n=e.lengthComputable?e.loaded/e.total:e.loaded/(e.loaded+1e6),this.fireEvent("loading",Math.round(100*n),e.target)}},{key:"exportPCM",value:function(e,n,y,k){e=e||1024,k=k||0,n=n||1e4,y=y||!1;var O=this.backend.getPeaks(e,k),C=[].map.call(O,function(E){return Math.round(E*n)/n}),R=JSON.stringify(C);return y||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(R)),R}},{key:"exportImage",value:function(e,n){return e||(e="image/png"),n||(n=1),this.drawer.getImage(e,n)}},{key:"cancelAjax",value:function(){this.currentAjax&&(this.currentAjax.xhr.abort(),this.currentAjax=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(e){return e.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),this.params.responsive!==!1&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend.destroy(),this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}]),u}();f.default=r,r.VERSION="2.2.1",r.util=c,x.exports=f.default},function(x,f,b){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(m){var w=new p.default,v=new XMLHttpRequest,d=!1;return v.open(m.method||"GET",m.url,!0),v.responseType=m.responseType||"json",m.xhr&&(m.xhr.requestHeaders&&m.xhr.requestHeaders.forEach(function(g){v.setRequestHeader(g.key,g.value)}),m.xhr.withCredentials&&(v.withCredentials=!0)),v.addEventListener("progress",function(g){w.fireEvent("progress",g),g.lengthComputable&&g.loaded==g.total&&(d=!0)}),v.addEventListener("load",function(g){d||w.fireEvent("progress",g),w.fireEvent("load",g),v.status==200||v.status==206?w.fireEvent("success",v.response,g):w.fireEvent("error",g)}),v.addEventListener("error",function(g){return w.fireEvent("error",g)}),v.send(),w.xhr=v,w};var c,p=(c=b(1))&&c.__esModule?c:{default:c};x.exports=f.default},function(x,f,b){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(){return"wavesurfer_"+Math.random().toString(32).substring(2)},x.exports=f.default},function(x,f,b){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(c){var p=-1/0;return Object.keys(c).forEach(function(m){c[m]>p&&(p=c[m])}),p},x.exports=f.default},function(x,f,b){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(c){var p=Number(1/0);return Object.keys(c).forEach(function(m){c[m]<p&&(p=c[m])}),p},x.exports=f.default},function(x,f,b){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(c){for(var p=arguments.length,m=new Array(p>1?p-1:0),w=1;w<p;w++)m[w-1]=arguments[w];return m.forEach(function(v){Object.keys(v).forEach(function(d){c[d]=v[d]})}),c},x.exports=f.default},function(x,f,b){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(c,p){return Object.keys(p).forEach(function(m){c.style[m]!==p[m]&&(c.style[m]=p[m])}),c},x.exports=f.default},function(x,f,b){Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(m){return function(){for(var w=arguments.length,v=new Array(w),d=0;d<w;d++)v[d]=arguments[d];return(0,p.default)(function(){return m.apply(void 0,v)})}};var c,p=(c=b(2))&&c.__esModule?c:{default:c};x.exports=f.default},function(x,f){function b(c,p,m){var w,v,d,g,P;function h(){var s=Date.now()-g;s<p&&s>=0?w=setTimeout(h,p-s):(w=null,m||(P=c.apply(d,v),d=v=null))}p==null&&(p=100);var l=function(){d=this,v=arguments,g=Date.now();var s=m&&!w;return w||(w=setTimeout(h,p)),s&&(P=c.apply(d,v),d=v=null),P};return l.clear=function(){w&&(clearTimeout(w),w=null)},l.flush=function(){w&&(P=c.apply(d,v),d=v=null,clearTimeout(w),w=null)},l}b.debounce=b,x.exports=b},function(x,f,b){function c(p){p.stopPropagation(),document.body.removeEventListener("click",c,!0)}Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(p){document.body.addEventListener("click",c,!0)},x.exports=f.default},function(x,f,b){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var c,p=(c=b(15))&&c.__esModule?c:{default:c},m=function(l){if(l&&l.__esModule)return l;var s={};if(l!=null){for(var o in l)if(Object.prototype.hasOwnProperty.call(l,o)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(l,o):{};i.get||i.set?Object.defineProperty(s,o,i):s[o]=l[o]}}return s.default=l,s}(b(0));function w(l){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(l)}function v(l,s){for(var o=0;o<s.length;o++){var i=s[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(l,i.key,i)}}function d(l,s){return!s||w(s)!=="object"&&typeof s!="function"?function(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}(l):s}function g(l){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)})(l)}function P(l,s){return(P=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o})(l,s)}var h=function(l){function s(t,r){var a;return function(u,e){if(!(u instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(a=d(this,g(s).call(this,t,r))).maxCanvasWidth=r.maxCanvasWidth,a.maxCanvasElementWidth=Math.round(r.maxCanvasWidth/r.pixelRatio),a.hasProgressCanvas=r.waveColor!=r.progressColor,a.halfPixel=.5/r.pixelRatio,a.canvases=[],a.progressWave=null,a}var o,i;return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&P(t,r)}(s,p.default),o=s,(i=[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"})),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var t=this,r=Math.round(this.width/this.params.pixelRatio),a=Math.ceil(r/(this.maxCanvasElementWidth+2));this.canvases.length<a;)this.addCanvas();for(;this.canvases.length>a;)this.removeCanvas();this.canvases.forEach(function(u,e){var n=t.maxCanvasWidth+2*Math.ceil(t.params.pixelRatio/2);e==t.canvases.length-1&&(n=t.width-t.maxCanvasWidth*(t.canvases.length-1)),t.updateDimensions(u,n,t.height),t.clearWaveForEntry(u)})}},{key:"addCanvas",value:function(){var t={},r=this.maxCanvasElementWidth*this.canvases.length;t.wave=this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:2,left:r+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"})),t.waveCtx=t.wave.getContext("2d"),this.hasProgressCanvas&&(t.progress=this.progressWave.appendChild(this.style(document.createElement("canvas"),{position:"absolute",left:r+"px",top:0,bottom:0,height:"100%"})),t.progressCtx=t.progress.getContext("2d")),this.canvases.push(t)}},{key:"removeCanvas",value:function(){var t=this.canvases.pop();t.wave.parentElement.removeChild(t.wave),this.hasProgressCanvas&&t.progress.parentElement.removeChild(t.progress)}},{key:"updateDimensions",value:function(t,r,a){var u=Math.round(r/this.params.pixelRatio),e=Math.round(this.width/this.params.pixelRatio);t.start=t.waveCtx.canvas.offsetLeft/e||0,t.end=t.start+u/e,t.waveCtx.canvas.width=r,t.waveCtx.canvas.height=a,this.style(t.waveCtx.canvas,{width:u+"px"}),this.style(this.progressWave,{display:"block"}),this.hasProgressCanvas&&(t.progressCtx.canvas.width=r,t.progressCtx.canvas.height=a,this.style(t.progressCtx.canvas,{width:u+"px"}))}},{key:"clearWave",value:function(){var t=this;this.canvases.forEach(function(r){return t.clearWaveForEntry(r)})}},{key:"clearWaveForEntry",value:function(t){t.waveCtx.clearRect(0,0,t.waveCtx.canvas.width,t.waveCtx.canvas.height),this.hasProgressCanvas&&t.progressCtx.clearRect(0,0,t.progressCtx.canvas.width,t.progressCtx.canvas.height)}},{key:"drawBars",value:function(t,r,a,u){var e=this;return this.prepareDraw(t,r,a,u,function(n){var y=n.absmax,k=n.hasMinVals,O=(n.height,n.offsetY),C=n.halfH,R=n.peaks;if(a!==void 0){var E,S=k?2:1,W=R.length/S,A=e.params.barWidth*e.params.pixelRatio,M=A+(e.params.barGap===null?Math.max(e.params.pixelRatio,~~(A/2)):Math.max(e.params.pixelRatio,e.params.barGap*e.params.pixelRatio)),D=W/e.width,B=u;for(E=a;E<B;E+=M){var N=R[Math.floor(E*D*S)]||0,L=Math.round(N/y*C);e.fillRect(E+e.halfPixel,C-L+O,A+e.halfPixel,2*L)}}})}},{key:"drawWave",value:function(t,r,a,u){var e=this;return this.prepareDraw(t,r,a,u,function(n){var y=n.absmax,k=n.hasMinVals,O=(n.height,n.offsetY),C=n.halfH,R=n.peaks;if(!k){var E,S=[],W=R.length;for(E=0;E<W;E++)S[2*E]=R[E],S[2*E+1]=-R[E];R=S}a!==void 0&&e.drawLine(R,y,C,O,a,u),e.fillRect(0,C+O-e.halfPixel,e.width,e.halfPixel)})}},{key:"drawLine",value:function(t,r,a,u,e,n){var y=this;this.canvases.forEach(function(k){y.setFillStyles(k),y.drawLineToContext(k,k.waveCtx,t,r,a,u,e,n),y.drawLineToContext(k,k.progressCtx,t,r,a,u,e,n)})}},{key:"drawLineToContext",value:function(t,r,a,u,e,n,y,k){if(r){var O,C,R=a.length/2,E=Math.round(R*t.start),S=E,W=Math.round(R*t.end)+1,A=t.progress.width/(W-S-1),M=e+n,D=u/e;for(r.beginPath(),r.moveTo((S-E)*A,M),r.lineTo((S-E)*A,M-Math.round((a[2*S]||0)/D)),O=S;O<W;O++){var B=a[2*O]||0,N=Math.round(B/D);r.lineTo((O-E)*A+this.halfPixel,M-N)}for(C=W-1;C>=S;C--){var L=a[2*C+1]||0,$=Math.round(L/D);r.lineTo((C-E)*A+this.halfPixel,M-$)}r.lineTo((S-E)*A,M-Math.round((a[2*S+1]||0)/D)),r.closePath(),r.fill()}}},{key:"fillRect",value:function(t,r,a,u){var e,n=Math.floor(t/this.maxCanvasWidth),y=Math.min(Math.ceil((t+a)/this.maxCanvasWidth)+1,this.canvases.length);for(e=n;e<y;e++){var k=this.canvases[e],O=e*this.maxCanvasWidth,C={x1:Math.max(t,e*this.maxCanvasWidth),y1:r,x2:Math.min(t+a,e*this.maxCanvasWidth+k.waveCtx.canvas.width),y2:r+u};C.x1<C.x2&&(this.setFillStyles(k),this.fillRectToContext(k.waveCtx,C.x1-O,C.y1,C.x2-C.x1,C.y2-C.y1),this.fillRectToContext(k.progressCtx,C.x1-O,C.y1,C.x2-C.x1,C.y2-C.y1))}}},{key:"prepareDraw",value:function(t,r,a,u,e){var n=this;return m.frame(function(){if(t[0]instanceof Array){var y=t;if(n.params.splitChannels)return n.setHeight(y.length*n.params.height*n.params.pixelRatio),y.forEach(function(S,W){return n.prepareDraw(S,W,a,u,e)});t=y[0]}var k=1/n.params.barHeight;if(n.params.normalize){var O=m.max(t),C=m.min(t);k=-C>O?-C:O}var R=[].some.call(t,function(S){return S<0}),E=n.params.height*n.params.pixelRatio;return e({absmax:k,hasMinVals:R,height:E,offsetY:E*r||0,halfH:E/2,peaks:t})})()}},{key:"fillRectToContext",value:function(t,r,a,u,e){t&&t.fillRect(r,a,u,e)}},{key:"setFillStyles",value:function(t){t.waveCtx.fillStyle=this.params.waveColor,this.hasProgressCanvas&&(t.progressCtx.fillStyle=this.params.progressColor)}},{key:"getImage",value:function(t,r){var a=this.canvases.map(function(u){return u.wave.toDataURL(t,r)});return a.length>1?a:a[0]}},{key:"updateProgress",value:function(t){this.style(this.progressWave,{width:t+"px"})}}])&&v(o.prototype,i),s}();f.default=h,x.exports=f.default},function(x,f,b){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var c=function(P){if(P&&P.__esModule)return P;var h={};if(P!=null){for(var l in P)if(Object.prototype.hasOwnProperty.call(P,l)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(P,l):{};s.get||s.set?Object.defineProperty(h,l,s):h[l]=P[l]}}return h.default=P,h}(b(0));function p(P){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(P)}function m(P,h){for(var l=0;l<h.length;l++){var s=h[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(P,s.key,s)}}function w(P,h){return!h||p(h)!=="object"&&typeof h!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(P):h}function v(P){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(h){return h.__proto__||Object.getPrototypeOf(h)})(P)}function d(P,h){return(d=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l})(P,h)}var g=function(P){function h(o,i){var t;return function(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}(this,h),(t=w(this,v(h).call(this))).container=o,t.params=i,t.width=0,t.height=i.height*t.params.pixelRatio,t.lastPos=0,t.wrapper=null,t}var l,s;return function(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),i&&d(o,i)}(h,c.Observer),l=h,(s=[{key:"style",value:function(o,i){return c.style(o,i)}},{key:"createWrapper",value:function(){this.wrapper=this.container.appendChild(document.createElement("wave")),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(o,i){!i&&o.preventDefault();var t,r=o.targetTouches?o.targetTouches[0].clientX:o.clientX,a=this.wrapper.getBoundingClientRect(),u=this.width,e=this.getWidth();return!this.params.fillParent&&u<e?(t=(this.params.rtl?a.right-r:r-a.left)*(this.params.pixelRatio/u)||0)>1&&(t=1):t=((this.params.rtl?a.right-r:r-a.left)+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,t}},{key:"setupWrapperEvents",value:function(){var o=this;this.wrapper.addEventListener("click",function(i){var t=o.wrapper.offsetHeight-o.wrapper.clientHeight;if(t!=0){var r=o.wrapper.getBoundingClientRect();if(i.clientY>=r.bottom-t)return}o.params.interact&&o.fireEvent("click",i,o.handleEvent(i))}),this.wrapper.addEventListener("scroll",function(i){return o.fireEvent("scroll",i)})}},{key:"drawPeaks",value:function(o,i,t,r){this.setWidth(i)||this.clearWave(),this.params.barWidth?this.drawBars(o,0,t,r):this.drawWave(o,0,t,r)}},{key:"resetScroll",value:function(){this.wrapper!==null&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(o){var i=this.wrapper.scrollWidth*o;this.recenterOnPosition(i,!0)}},{key:"recenterOnPosition",value:function(o,i){var t=this.wrapper.scrollLeft,r=~~(this.wrapper.clientWidth/2),a=this.wrapper.scrollWidth-this.wrapper.clientWidth,u=o-r,e=u-t;a!=0&&(!i&&-r<=e&&e<r&&(u=t+(e=Math.max(-5,Math.min(5,e)))),(u=Math.max(0,Math.min(a,u)))!=t&&(this.wrapper.scrollLeft=u))}},{key:"getScrollX",value:function(){var o=0;if(this.wrapper){var i=this.params.pixelRatio;if(o=Math.round(this.wrapper.scrollLeft*i),this.params.scrollParent){var t=~~(this.wrapper.scrollWidth*i-this.getWidth());o=Math.min(t,Math.max(0,o))}}return o}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(o){return this.width!=o&&(this.width=o,this.params.fillParent||this.params.scrollParent?this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"setHeight",value:function(o){return o!=this.height&&(this.height=o,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(o){var i=1/this.params.pixelRatio,t=Math.round(o*this.width)*i;if(t<this.lastPos||t-this.lastPos>=i){if(this.lastPos=t,this.params.scrollParent&&this.params.autoCenter){var r=~~(this.wrapper.scrollWidth*o);this.recenterOnPosition(r)}this.updateProgress(t)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container&&this.container.removeChild(this.wrapper),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(o,i,t,r){}},{key:"drawWave",value:function(o,i,t,r){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(o){}}])&&m(l.prototype,s),h}();f.default=g,x.exports=f.default},function(x,f,b){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var c,p=(c=b(3))&&c.__esModule?c:{default:c};(function(l){if(l&&l.__esModule)return l;var s={};if(l!=null){for(var o in l)if(Object.prototype.hasOwnProperty.call(l,o)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(l,o):{};i.get||i.set?Object.defineProperty(s,o,i):s[o]=l[o]}}s.default=l})(b(0));function m(l){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(l)}function w(l,s){for(var o=0;o<s.length;o++){var i=s[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(l,i.key,i)}}function v(l,s){return!s||m(s)!=="object"&&typeof s!="function"?function(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}(l):s}function d(l,s,o){return(d=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,t,r){var a=function(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&(e=g(e))!==null;);return e}(i,t);if(a){var u=Object.getOwnPropertyDescriptor(a,t);return u.get?u.get.call(r):u.value}})(l,s,o||l)}function g(l){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)})(l)}function P(l,s){return(P=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o})(l,s)}var h=function(l){function s(t){var r;return function(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")}(this,s),(r=v(this,g(s).call(this,t))).params=t,r.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},r.mediaType=t.mediaType.toLowerCase(),r.elementPosition=t.elementPosition,r.peaks=null,r.playbackRate=1,r.volume=1,r.buffer=null,r.onPlayEnd=null,r}var o,i;return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&P(t,r)}(s,p.default),o=s,(i=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"createTimer",value:function(){var t=this;this.on("play",function r(){t.isPaused()||(t.fireEvent("audioprocess",t.getCurrentTime()),(window.requestAnimationFrame||window.webkitRequestAnimationFrame)(r))}),this.on("pause",function(){t.fireEvent("audioprocess",t.getCurrentTime())})}},{key:"load",value:function(t,r,a,u){var e=document.createElement(this.mediaType);e.controls=this.params.mediaControls,e.autoplay=this.params.autoplay||!1,e.preload=u??"auto",e.src=t,e.style.width="100%";var n=r.querySelector(this.mediaType);n&&r.removeChild(n),r.appendChild(e),this._load(e,a)}},{key:"loadElt",value:function(t,r){t.controls=this.params.mediaControls,t.autoplay=this.params.autoplay||!1,this._load(t,r)}},{key:"_load",value:function(t,r){var a=this;typeof t.load=="function"&&t.load(),t.addEventListener("error",function(){a.fireEvent("error","Error loading media element")}),t.addEventListener("canplay",function(){a.fireEvent("canplay")}),t.addEventListener("ended",function(){a.fireEvent("finish")}),t.addEventListener("play",function(){a.fireEvent("play")}),t.addEventListener("pause",function(){a.fireEvent("pause")}),this.media=t,this.peaks=r,this.onPlayEnd=null,this.buffer=null,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var t=(this.buffer||this.media).duration;return t>=1/0&&(t=this.media.seekable.end(0)),t}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(t){t!=null&&(this.media.currentTime=t),this.clearPlayEnd()}},{key:"play",value:function(t,r){this.seekTo(t);var a=this.media.play();return r&&this.setPlayEnd(r),a}},{key:"pause",value:function(){var t;return this.media&&(t=this.media.pause()),this.clearPlayEnd(),t}},{key:"setPlayEnd",value:function(t){var r=this;this._onPlayEnd=function(a){a>=t&&(r.pause(),r.seekTo(t))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(t,r,a){return this.buffer?d(g(s.prototype),"getPeaks",this).call(this,t,r,a):this.peaks||[]}},{key:"setSinkId",value:function(t){return t?this.media.setSinkId?this.media.setSinkId(t):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+t))}},{key:"getVolume",value:function(){return this.volume||this.media.volume}},{key:"setVolume",value:function(t){this.volume=t,this.media.volume=this.volume}},{key:"destroy",value:function(){this.pause(),this.unAll(),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}])&&w(o.prototype,i),s}();f.default=h,x.exports=f.default},function(x,f,b){function c(m,w){for(var v=0;v<w.length;v++){var d=w[v];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(m,d.key,d)}}Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var p=function(){function m(){(function(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")})(this,m),this.clearPeakCache()}var w,v;return w=m,(v=[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(d,g,P){d!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=d);for(var h=[],l=0;l<this.peakCacheRanges.length&&this.peakCacheRanges[l]<g;)l++;for(l%2==0&&h.push(g);l<this.peakCacheRanges.length&&this.peakCacheRanges[l]<=P;)h.push(this.peakCacheRanges[l]),l++;l%2==0&&h.push(P),h=h.filter(function(o,i,t){return i==0?o!=t[i+1]:i==t.length-1?o!=t[i-1]:o!=t[i-1]&&o!=t[i+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(h),this.peakCacheRanges=this.peakCacheRanges.sort(function(o,i){return o-i}).filter(function(o,i,t){return i==0?o!=t[i+1]:i==t.length-1?o!=t[i-1]:o!=t[i-1]&&o!=t[i+1]});var s=[];for(l=0;l<h.length;l+=2)s.push([h[l],h[l+1]]);return s}},{key:"getCacheRanges",value:function(){var d,g=[];for(d=0;d<this.peakCacheRanges.length;d+=2)g.push([this.peakCacheRanges[d],this.peakCacheRanges[d+1]]);return g}}])&&c(w.prototype,v),m}();f.default=p,x.exports=f.default}])})})(Y);const ie=K(Y.exports),F=60,oe=60,se=24,V=oe*F,q=se*V;function ue(_=0){return le(_,"minutes").map(({value:x})=>ce(x)).join(":")}function le(_,T="seconds"){const x=Math.floor(_/q),f=Math.floor(_%q/V),b=Math.floor(_%V/F),c=_%F,p=[{type:"days",value:x},{type:"hours",value:f},{type:"minutes",value:b},{type:"seconds",value:c}];for(;p[0].value===0&&p[0].type!==T;)p.shift();return p}function ce(_){const T=String(Math.ceil(_));return T.length<2?"0"+T:T}const G=30,fe=_=>{const{ariaMetadata:T,audioSrc:x,caption:f,height:b,mediaFailedToLoad:c,headerElement:p,failedLoadElement:m,downloadFile:w}=_,v=j.exports.useRef(),d=j.exports.useRef(null),[g,P]=j.exports.useState(!0),[h,l]=j.exports.useState(!1),[s,o]=j.exports.useState(),[i,t]=j.exports.useState();return j.exports.useEffect(()=>{if(x){if(!d.current)throw Error("Unexpected dom state AudioCard render should always set the ref");const r=ie.create({backend:"WebAudio",container:d.current,waveColor:Q,progressColor:U,cursorColor:U,responsive:!0,height:b-G});v.current=r,r.on("play",()=>{l(!0)}),r.on("pause",()=>{l(!1)}),r.on("ready",()=>{const a=r.getDuration();P(!1),t(void 0),o(a||void 0)}),r.on("seek",()=>{t(r.getCurrentTime())}),r.on("audioprocess",()=>{t(r.getCurrentTime())}),r.load(x)}return()=>{v.current&&v.current.destroy()}},[x,b]),j.exports.createElement("div",{className:"media-card__wrapper",style:{width:"100%",height:"100%"}},j.exports.createElement(z,{className:"audio-card content-card",style:{height:"100%",width:"100%"}},p&&j.exports.createElement(z.Content,{style:{border:0,width:"100%",height:"100%",padding:"5px 0px",display:"flex",alignItems:"center"}},p),j.exports.createElement("div",{className:"audio-card-waveform",style:{height:"100%",width:"100%",flex:"1 1 auto",display:c?"none":"block"},ref:d}),c?m:j.exports.createElement("div",{style:{display:"flex",alignItems:"center",whiteSpace:"nowrap",width:"100%",height:`${G}px`}},j.exports.createElement(H,{"aria-label":`${h?"Pause":"Play"} audio${T==null?"":` for ${T}`}`,style:{flex:"0 0 auto",paddingTop:"0.5em",paddingBottom:"0.5em"},disabled:g,loading:g,icon:g?"":h?"pause":"play",onClick:()=>{v.current&&v.current.playPause()}}),j.exports.createElement("div",{style:{flex:"1 1 auto",overflow:"hidden"},className:"audio-card-time"},[i,s].map(ue).join("/")),f&&j.exports.createElement("div",{style:{background:Z,width:"100%",overflow:"hidden",display:"flex",justifyContent:"center",flex:"1 1"}},j.exports.createElement("div",{style:{flexGrow:1}},j.exports.createElement("div",{style:{padding:"0 5px",textOverflow:"ellipsis"}},f))),x&&j.exports.createElement(H,{"aria-label":`Download audio${T==null?"":` for ${T}`}`,style:{flex:"0 0 auto",paddingTop:"0.5em",paddingBottom:"0.5em"},icon:!0,onClick:w},j.exports.createElement(ee,{name:"download"})))))},de=_=>{const T=_.input,x=te(T,!0),f=async()=>{if(!x.directUrl){console.error("Failed to retrieve download URL for audio sample");return}const b=await(await fetch(x.directUrl)).blob(),c=x.asset.path.split("/");ae(b,c[c.length-1])};return x.loading?I.createElement(re,null):I.createElement(ne.AutoSizer,{style:{height:"100%",width:"100%"}},({width:b,height:c})=>I.createElement(fe,{audioSrc:x.directUrl,caption:x.asset.caption,height:c,mediaFailedToLoad:x.directUrl==null,downloadFile:f}))};export{de as default};
//# sourceMappingURL=Component.ddfb7bfe.js.map
