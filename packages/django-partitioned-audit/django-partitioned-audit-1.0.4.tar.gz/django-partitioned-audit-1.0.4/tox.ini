[tox]
envlist = py{38,39,310,311}-django{32,41,42}-postgres{12,13,14,15}

[testenv]

deps =
    django32: Django>=3.2,<3.3
    django41: Django>=4.1,<4.2
    django42: Django>=4.2,<4.3
    psycopg2-binary
    pytest
    pytest-django
    requests
    # Remember to keep in sync with `requirements.in`

allowlist_externals =
    env

setenv =
    DJANGO_SETTINGS_MODULE = config.tox_settings
    PYTHONPATH = {toxinidir}:{toxinidir}/tests/app_django

commands =
    env DPA_AUDIT_TABLE_MANAGER=django_partitioned_audit.audit_table.advanced_audit_table_manager.AdvancedAuditTableManager pytest -s ./tests/
    pytest -s ./tests/
