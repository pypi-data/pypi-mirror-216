Metadata-Version: 2.1
Name: cerebrium
Version: 1.1.4
Summary: 
License: AGPL-3.0-only
Author: Elijah Roussos
Author-email: elijah@cerebrium.ai
Requires-Python: >=3.8,<3.11
Classifier: License :: OSI Approved :: GNU Affero General Public License v3
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Provides-Extra: onnxruntime
Provides-Extra: onnxruntime-gpu
Provides-Extra: tensorflow
Provides-Extra: worker
Requires-Dist: Pillow (>=9.4,<10.0.0) ; extra == "worker"
Requires-Dist: accelerate (>=0.18.0,<0.19.0) ; extra == "worker"
Requires-Dist: arize (>=6.0.2,<7.0)
Requires-Dist: bitsandbytes (>=0.38.0,<0.39.0) ; extra == "worker"
Requires-Dist: boto3 (>=1.26)
Requires-Dist: celery (>=5.2.0,<5.3.0) ; extra == "worker"
Requires-Dist: censius (>=1.6,<2.0)
Requires-Dist: chitra (>=0.2.0,<0.3.0) ; extra == "worker"
Requires-Dist: cloudpickle (>=2.0,<2.1)
Requires-Dist: datadog (>=0.45.0,<0.51.0) ; extra == "worker"
Requires-Dist: datasets (>=2.10.0,<2.11.0) ; extra == "worker"
Requires-Dist: ddtrace (>=1.10.0,<1.11.0) ; extra == "worker"
Requires-Dist: keras (>=2.12.0) ; extra == "tensorflow"
Requires-Dist: loguru (>=0.6) ; extra == "worker"
Requires-Dist: numpy (>=1.20,<2.0)
Requires-Dist: onnxruntime (>=1.13,<2.0) ; extra == "onnxruntime"
Requires-Dist: onnxruntime-gpu (>=1.14,<2.0) ; extra == "onnxruntime-gpu"
Requires-Dist: pandas (>=1.5,<3.0)
Requires-Dist: requests (>=2.28,<3.0)
Requires-Dist: scikit-learn (>=1.2,<2.0)
Requires-Dist: spacy (>=3.5.0,<4.0.0)
Requires-Dist: tenacity (>=8.2,<8.3)
Requires-Dist: tensorflow (>=2.12.0) ; extra == "tensorflow"
Requires-Dist: torch (>=1.13,<3.0)
Requires-Dist: tqdm (>=4.64,<4.65)
Requires-Dist: transformers (>=4.26,<5.0)
Requires-Dist: typer[all] (==0.7.0)
Requires-Dist: xformers (>=0.0.16) ; extra == "worker"
Requires-Dist: xgboost (>=1.7,<2.0)
Requires-Dist: yaspin (>=2.3,<2.4)
Project-URL: Documentation, https://docs.cerebrium.ai/
Project-URL: Homepage, https://www.cerebrium.ai
Description-Content-Type: text/markdown

# Cerebrium

Cerebrium is the Python package built for use with the [Cerebrium](https://www.cerebrium.ai/) platform, which allows you to deploy your machine learning models as a REST API with a single line of code.

For usage consult the [documentation](https://docs.cerebrium.ai/). The repo for the documentation can be found [here](https://github.com/CerebriumAI/docs).

# Development environment
Cerebrium uses Poetry for dependency management and packaging. To install Poetry, follow the instructions [here](https://python-poetry.org/docs/#installation). Alternatively, consult our article on [how to manage your python environments](https://blog.cerebrium.ai/setting-up-your-data-science-and-ml-development-environment-949277339939?gi=54b980dd4e1d).

You can run the following steps to setup your Python development environment with the following commands:
```bash
poetry install
poetry shell
```
You should use this environment to run tests, notebooks and build the package.

Furthermore, you should set up a `.env` file in the project root with the following environment variables:
```bash
DEVELOPMENT_ENV=dev
```

You can add packages to the project by running the following command:
```bash
poetry add <package>
```

You **will** need to relock if you have added any packages to the project. You can do this by running the following command:
```bash
poetry lock
```

## Codespaces Setup
To set up a Github Codespaces for development, you should run the following command to setup AWS:
```bash
cd ~
curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
unzip awscliv2.zip
sudo ./aws/install
```

## Running tests
To run the tests, run the following command:
```bash
poetry run pytest --cov-report html:cov_html\
          --cov-report annotate:cov_annotate\
          --cov=cerebrium tests/
```

## Publishing Development Builds (DEPRECATED, we longer need to do this for development builds)
To publish a development build on CodeArtifact, run the following command to configure Poetry:
```bash
poetry config http-basic.cerebrium aws $(aws codeartifact get-authorization-token --domain-owner 288552132534 --domain cerebrium --query 'authorizationToken' --output text --region eu-west-1)
```

Then, run the following command to publish the package:
```bash
poetry shell # this is needed to set the version dynamically
poetry publish --build -r cerebrium
```

If the patch version is not up to date, merge the latest version tag into the branch:
```bash
git merge v<tag>
```

## Push a worker development build to ECR
To push a worker development build to ECR, run the following command:
```bash
depot build -t 288552132534.dkr.ecr.eu-west-1.amazonaws.com/worker:dev --platform=linux/amd64 . --push --file worker/docker/Dockerfile --build-arg env=dev
```

## Install a development build (DEPRECATED)
To install a development build, run the following command to configure pip (**NOTE** this WILL change your default pip index URL):
```bash

aws codeartifact login --tool pip --repository cerebrium-pypi --domain cerebrium --domain-owner 288552132534 --region eu-west-1
```
Then, pip install:
```bash
pip install --pre cerebrium
```

### Resources for Poetry/CodeArtifact
- https://repost.aws/questions/QURD7aFNj_R9-8odJY5mfgrw/npm-publish-for-a-package-to-aws-code-artifact-repo-fails-with-error-the-provided-package-is-configured-to-block-new-version-publishes
- https://docs.aws.amazon.com/codeartifact/latest/ug/python-configure-pip.html
