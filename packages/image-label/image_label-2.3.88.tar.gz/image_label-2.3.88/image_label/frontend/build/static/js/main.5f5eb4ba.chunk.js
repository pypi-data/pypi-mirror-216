(this.webpackJsonpstreamlit_component_template=this.webpackJsonpstreamlit_component_template||[]).push([[0],{37:function(t,e,n){},44:function(t,e,n){"use strict";n.r(e);var a=n(7),o=n.n(a),i=n(27),c=n.n(i),r=n(5),s=n(4),d=n(6),l=n(0),u=n(1),h=n(2),b=n(3),j=n(10),g=n(25),f=(n(37),n(31)),m=n(13),p=function(t){var e=t.children,n=t.geometry,a=t.style;return Object(m.jsx)("div",{style:Object(j.a)(Object(j.a)({},a),{},{position:"absolute",left:"".concat(n.x,"%"),top:"".concat(n.y,"%"),height:"".concat(n.height,"%"),width:"".concat(n.width,"%")}),children:e})};function v(t){var e=t.annotation,n=e.geometry;return Object(m.jsx)("div",{style:{background:"black",color:"white",padding:10,position:"absolute",fontSize:12,left:"".concat(n.x,"%"),top:"".concat(n.y+n.height,"%")},children:e.data&&e.data.text},e.data.id)}var O=function(t){Object(h.a)(n,t);var e=Object(b.a)(n);function n(t){var a,i;return Object(l.a)(this,n),(i=e.call(this,t)).canvasRef=o.a.createRef(),i.renderImageToCanvas=function(){return new Promise((function(t){var e=i.canvasRef.current,n=e.getContext("2d"),a=new Image;a.onload=function(){e.width=a.width,e.height=a.height,n.drawImage(a,0,0,a.width,a.height),i.state.annotations.forEach((function(t){var e=t.geometry,o=t.data,i=e.x,c=e.y,r=e.width,s=e.height,d=o.text,l=i/100*a.width,u=c/100*a.height,h=r/100*a.width,b=s/100*a.height;n.beginPath(),n.rect(l,u,h,b),n.lineWidth=3,n.strokeStyle="red",n.fillStyle="red",n.stroke(),n.font="40px Arial",n.fillText(d,l,u>15?u-5:u+15)})),t()},a.src="data:image/jpeg;base64,"+i.props.image}))},i.onChange=function(t){i.setState({annotation:t})},i.onSubmit=function(t){var e=t.geometry,n=t.data;i.setState({annotation:{},annotations:i.state.annotations.concat({geometry:e,data:Object(j.a)(Object(j.a)({},n),{},{id:Math.random()})})})},i.onChangeType=function(t){i.setState({annotation:{},type:t.currentTarget.innerHTML})},i.deleteAnnotation=function(t){i.setState({annotations:i.state.annotations.filter((function(e){return e.data.id!==t}))})},i.downloadImage=Object(d.a)(Object(s.a)().mark((function t(){var e,n,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.renderImageToCanvas();case 2:n=null===(e=i.canvasRef.current)||void 0===e?void 0:e.toDataURL(),(a=document.createElement("a")).href=n,a.download="image.png",a.click();case 7:case"end":return t.stop()}}),t)}))),i.state={annotations:Object(r.a)(null===(a=i.props)||void 0===a?void 0:a.detectedAnotations),annotation:{}},i}return Object(u.a)(n,[{key:"render",value:function(){var t=this,e="data:image/jpeg;base64,"+this.props.image;return Object(m.jsxs)("div",{children:[Object(m.jsx)(f.a,{src:e,alt:"pcb",annotations:this.state.annotations,type:this.state.type,value:this.state.annotation,onChange:this.onChange,onSubmit:this.onSubmit,renderEditor:function(e){return function(t,e){var n=t.annotation.geometry;return n?Object(m.jsxs)("div",{className:"holder",style:{background:"rgba(0, 0, 0, 0.15)",left:"".concat(n.x>80?75:n.x,"%"),top:"".concat(n.y>85?85:n.y,"%")},children:[Object(m.jsxs)("select",{className:"selectItem",onChange:function(e){t.onChange(Object(j.a)(Object(j.a)({},t.annotation),{},{data:Object(j.a)(Object(j.a)({},t.annotation.data),{},{text:e.target.value})}))},children:[Object(m.jsx)("option",{value:"",children:"Select..."}),e.map((function(t){return Object(m.jsx)("option",{value:t,children:t},t)}))]}),Object(m.jsx)("button",{className:"addLabelButton",onClick:t.onSubmit,children:"Add"})]}):null}(e,t.props.labels)},renderContent:v,renderHighlight:function(e){return function(t){var e=t.annotation,n=t.active,a=t.deleteAnnotation,o=e.geometry;return o?Object(m.jsx)(p,{geometry:o,style:{border:"solid 1px ".concat(n?"#3e8e41":w())},children:n&&Object(m.jsx)("button",{className:"deleteAnnotationButton",onClick:function(){console.log("delete"),a(e.data.id)},children:"X"})},e.data.id):null}({annotation:e.annotation,active:e.active,deleteAnnotation:t.deleteAnnotation})}}),Object(m.jsx)("button",{className:"downloadButton",onClick:this.downloadImage,children:"Download"}),Object(m.jsx)("canvas",{ref:this.canvasRef,style:{display:"none"}})]})}}]),n}(a.Component),x=function(t){Object(h.a)(n,t);var e=Object(b.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.args,e=t.image,n=t.labels,a=t.detectedAnotations;return Object(m.jsx)(O,{image:e,labels:n,detectedAnotations:a})}}]),n}(g.a),y=Object(g.b)(x);function w(){for(var t="#",e=0;e<6;e++){t+=Math.floor(16*Math.random()).toString(16)}return t}c.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(y,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.5f5eb4ba.chunk.js.map