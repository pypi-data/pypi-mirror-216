"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[129],{1035:function(e,n,t){t.d(n,{i:function(){return o}});var r=t(32667),i=t(78193),a=t(9938),s=t(35936),o=function(e){var n=e.edges,t=e.highlighted,a=e.strokeWidth,o=void 0===a?4:a,d=e.baseColor,c=void 0===d?r.w.KeylineGray:d;return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(l,{color:c,edges:n,strokeWidth:o}),(0,s.jsx)(l,{color:r.w.Blue500,edges:n.filter((function(e){var n=e.fromId,r=e.toId;return t===n||t===r})),strokeWidth:o})]})},l=i.memo((function(e){var n=e.edges,t=e.color,r=e.strokeWidth;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("defs",{children:(0,s.jsx)("marker",{id:"arrow".concat(btoa(t)),viewBox:"0 0 8 10",refX:"1",refY:"5",markerUnits:"strokeWidth",markerWidth:r,orient:"auto",children:(0,s.jsx)("path",{d:"M 0 0 L 8 5 L 0 10 z",fill:t})})}),n.map((function(e,n){return(0,s.jsx)("path",{d:(0,a.cD)({source:e.from,target:e.to}),stroke:t,strokeWidth:r,fill:"none",markerEnd:"url(#arrow".concat(btoa(t),")")},n)}))]})}))},43795:function(e,n,t){t.d(n,{OK:function(){return un},md:function(){return cn},CZ:function(){return dn}});var r,i,a,s,o=t(32723),l=t(41361),d=t(68079),c=t(34795),u=t(96234),p=t(33028),h=t(60319),m=t(67445),f=t(84464),x=t(17868),y=t(32667),g=t(17914),v=t(47515),j=t(42918),b=t.n(j),N=t(23662),w=t.n(N),K=t(97346),S=t.n(K),Z=t(78193),O=t(39707),A=t(30559),k=t(77647),C=t(1018),z=t(21916),E=t(8171),I=t(25620),_=t(78387),M=t(64218),P=t(13422),L=t(1035),F=t(71171),D=t(90239),G=t(31623),T=t(62638),R=t(44907),Q=t(89332),U=t(66708),V=t(35936),$=function(e){var n=e.pipelineSelector,t=(0,D.a)(B,{variables:{pipelineSelector:n}}),r=n.repositoryName,i=n.repositoryLocationName,a=(0,U.kQ)(r,i);return(0,V.jsx)(P.g,{queryResult:t,children:function(e){var n=e.pipelineSnapshotOrError;return"PipelineSnapshot"!==n.__typename?(0,V.jsx)(R.Q,{isGraph:!0,result:n,repoAddress:a}):(0,V.jsx)(Q.S,{container:n,repoAddress:a})}})},B=(0,G.Ps)(r||(r=(0,F.Z)(["\n  query AssetGraphSidebarQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        ...SidebarRootContainerFragment\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),Q.q,T.B),J=t(3060),W=t(1497),q=t(7055),H=t(62459),Y=t(86741),X=t(32375),ee=t(97412),ne=t(27409),te=t(69040),re=t(46634),ie=t(83473),ae=t(34072),se=t(65532),oe=t(94403),le=t(8078),de=t(62894),ce=t(15117),ue=t(13167),pe=t(45519),he=t(4537),me=t(67888),fe=t(40854),xe=t(9938),ye=t(84674),ge=t(24265),ve=t(89622),je=t(3077),be=t(75418),Ne=t(68365),we=t(33657),Ke=t(15998),Se=t(26390),Ze=t(20317),Oe=t(90039),Ae=t(90986),ke=t(41084),Ce=function(e){var n=e.runId,t=e.stepKeys,r=e.isOpen,i=e.onClose;return(0,V.jsxs)(je.Vq,{isOpen:r,style:{width:"80vw"},canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:i,children:[r?(0,V.jsx)(Se.C,{runId:n,children:function(e){return(0,V.jsx)(Ae.jp,{logs:e,children:function(r){return(0,V.jsx)(ze,{runId:n,metadata:r,stepKeys:t,logs:e})}})}},n):"",(0,V.jsx)("div",{style:{zIndex:2,background:y.w.White},children:(0,V.jsx)(je.cN,{topBorder:!0,children:(0,V.jsx)(pe.zx,{intent:"primary",onClick:i,children:"Done"})})})]})},ze=function(e){var n=e.runId,t=e.stepKeys,r=e.metadata,i=e.logs,a=(0,be.a)(),s=(0,Z.useState)(Oe.hi.structured),o=(0,u.Z)(s,2),l=o[0],d=o[1],c=Z.useState(null),h=(0,u.Z)(c,2),m=h[0],f=h[1],x=(0,Z.useState)({hideNonMatches:!0,focusedTime:0,levels:Object.fromEntries(Ke.w.map((function(e){return[e,!0]}))),logQuery:[],sinceTime:0}),g=(0,u.Z)(x,2),j=g[0],b=g[1],N=(0,ke.r)({metadata:r,stepKeys:t,selectionStepKeys:t}),w=N.computeLogFileKey,K=N.setComputeLogFileKey,S=N.logCaptureInfo,O=Z.useMemo((function(){return(0,p.Z)((0,p.Z)({},i),{},{allNodes:i.allNodes.filter((function(e){return e.stepKey&&t.includes(e.stepKey)}))})}),[i,t]);return(0,V.jsxs)(Ee,{children:[(0,V.jsx)(Oe.KZ,{metadata:r,logType:l,onSetLogType:d,computeLogFileKey:w,onSetComputeLogKey:K,computeLogUrl:m,steps:[],counts:i.counts,filter:j,onSetFilter:b,children:(0,V.jsx)(ee.rU,{to:"/runs/".concat(n,"?stepKeys=").concat(t),children:(0,V.jsxs)(v.x,{flex:{gap:4,alignItems:"center"},children:["View Run ",(0,V.jsx)(ie.fv,{children:(0,ve.EI)({id:n})}),(0,V.jsx)(X.JO,{name:"open_in_new",color:y.w.Link})]})})}),l!==Oe.hi.structured?a?(0,V.jsx)(Ne.h,{logKey:w?[n,"compute_logs",w]:[],logCaptureInfo:S,visibleIOType:Oe.hi[l],onSetDownloadUrl:f}):(0,V.jsx)(we.K,{runId:n,computeLogFileKey:w,ioType:Oe.hi[l],setComputeLogUrl:f}):(0,V.jsx)(Ze.S,{logs:O,filter:j,filterStepKeys:t,filterKey:"".concat(JSON.stringify(j)),metadata:r})]})},Ee=h.ZP.div.withConfig({displayName:"StepLogsDialog__LogsContainer",componentId:"sc-1qin3dc-0"})(["display:flex;flex-direction:column;gap:8px;height:65vh;"]),Ie=t(92761),_e=t(12478),Me=t(50021),Pe=function(e){var n=e.assetKey,t=e.latest,r=e.liveData,i=Z.useState(!1),a=(0,u.Z)(i,2),s=a[0],o=a[1],l="Run"===(null===t||void 0===t?void 0:t.runOrError.__typename)?null===t||void 0===t?void 0:t.runOrError:null,d=null===l||void 0===l?void 0:l.repositoryOrigin,c=d?(0,U.kQ)(d.repositoryName,d.repositoryLocationName):null,p=(0,Ie.Ux)(c);if(!t)return(0,V.jsx)(v.x,{padding:{top:16,bottom:32},children:(0,V.jsx)(m.t,{icon:"materialization",title:"No metadata",description:"No metadata was found for this asset."})});var h=t,f="MaterializationEvent"===h.__typename?null===h||void 0===h?void 0:h.assetLineage:[];return(0,V.jsx)(Le,{children:(0,V.jsxs)("tbody",{children:[(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{children:"Run"}),(0,V.jsx)("td",{children:l?(0,V.jsxs)("div",{children:[(0,V.jsxs)(v.x,{flex:{direction:"row",justifyContent:"space-between"},children:[(0,V.jsxs)(v.x,{children:["Run ",(0,V.jsx)(ee.rU,{to:"/runs/".concat(h.runId,"?timestamp=").concat(h.timestamp),children:(0,V.jsx)(ie.fv,{children:(0,ve.EI)({id:h.runId})})})]}),h.stepKey&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ce,{runId:h.runId,stepKeys:[h.stepKey],isOpen:s,onClose:function(){return o(!1)}}),(0,V.jsx)(pe.zx,{small:!0,icon:(0,V.jsx)(X.JO,{name:"wysiwyg"}),onClick:function(){return o(!0)},children:"View logs"})]})]}),!(0,xe.pv)(l.pipelineName)&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(v.x,{padding:{left:8,top:4},children:(0,V.jsx)(ge.h,{showIcon:!0,pipelineName:l.pipelineName,pipelineHrefContext:c||"repo-unknown",snapshotId:l.pipelineSnapshotId,isJob:(0,Ie.E8)(p,l.pipelineName)})}),(0,V.jsxs)(he.Z,{direction:"row",padding:{left:8},spacing:8,alignItems:"center",children:[(0,V.jsx)(X.JO,{name:"linear_scale",color:y.w.Gray400}),(0,V.jsx)(ee.rU,{to:(0,ve.tA)(l,h),children:h.stepKey})]})]})]}):"No materialization events"}),(0,V.jsx)("td",{})]}),null!==t&&void 0!==t&&t.partition?(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{children:"Partition"}),(0,V.jsx)("td",{children:t?t.partition:"No materialization events"}),(0,V.jsx)("td",{})]}):null,(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{children:"Timestamp"}),(0,V.jsx)("td",{children:(0,V.jsxs)(v.x,{flex:{gap:8,alignItems:"center"},children:[h?(0,V.jsx)(fe.E,{timestamp:{ms:Number(h.timestamp)}}):"No materialization events",r&&(0,V.jsx)(Me.d9,{assetKey:n,liveData:r,include:"all"})]})}),(0,V.jsx)("td",{})]}),null!==f&&void 0!==f&&f.length?(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{children:"Parent assets"}),(0,V.jsx)("td",{children:(0,V.jsx)(_e.i,{elements:f,timestamp:h.timestamp})}),(0,V.jsx)("td",{})]}):null,null===h||void 0===h?void 0:h.metadataEntries.map((function(e){return(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{children:e.label}),(0,V.jsx)("td",{children:(0,V.jsx)(ye.BL,{entry:e,expandSmallValues:!0,repoLocation:null===c||void 0===c?void 0:c.location})}),(0,V.jsx)("td",{children:e.description})]},"metadata-".concat(e.label))}))]})})},Le=(0,h.ZP)(me.i).withConfig({displayName:"LastMaterializationMetadata__MetadataTable",componentId:"sc-1u4xf4p-0"})(["td:first-child{white-space:nowrap;width:1px;max-width:400px;word-break:break-word;overflow:hidden;text-overflow:ellipsis;}"]),Fe=t(51294),De=t(44435),Ge=function(e){var n=e.asset,t=e.assetLastMaterializedAt,r=e.isSourceAsset,i=e.liveData,a=(0,De.fE)(n.assetKey,{},{assetHasDefinedPartitions:!!n.partitionDefinition}),s=a.materializations,o=a.observations,l=a.loadedPartitionKeys,d=a.loading,c=a.refetch,u=a.xAxis,p=(0,Fe.L)(u,s,o,l),h=r?o[0]:s[0];return Z.useEffect((function(){c()}),[t,c]),d?(0,V.jsx)(v.x,{padding:{vertical:20},children:(0,V.jsx)(H.$,{purpose:"section"})}):(0,V.jsxs)(V.Fragment,{children:[!n.partitionDefinition&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(ue.Z,{run:(null===i||void 0===i?void 0:i.runWhichFailedToMaterialize)||null,border:{side:"top",width:1,color:y.w.KeylineGray}}),(0,V.jsx)(ce.j,{liveData:i,border:{side:"top",width:1,color:y.w.KeylineGray}})]}),n.freshnessPolicy&&(0,V.jsx)(ae.pC,{title:"Freshness policy",children:(0,V.jsxs)(v.x,{margin:{horizontal:24,vertical:12},flex:{gap:12,alignItems:"flex-start"},children:[(0,V.jsx)(ie.uT,{style:{flex:1},children:(0,de.jY)(n.freshnessPolicy)}),(0,V.jsx)(de.vy,{liveData:i,policy:n.freshnessPolicy})]})}),n.autoMaterializePolicy&&(0,V.jsx)(ae.pC,{title:"Auto-materialize policy",children:(0,V.jsxs)(v.x,{margin:{horizontal:24,vertical:12},flex:{gap:12,alignItems:"flex-start"},children:[(0,V.jsx)(ie.uT,{style:{flex:1},children:(0,le.r)(n.autoMaterializePolicy)}),(0,V.jsx)(le.W,{policy:n.autoMaterializePolicy})]})}),l.length>1?null:(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(ae.pC,{title:r?"Observation in last run":"Materialization in last run",children:h?(0,V.jsx)("div",{style:{margin:-1,maxWidth:"100%",overflowX:"auto"},children:(0,V.jsx)(Pe,{assetKey:n.assetKey,latest:h,liveData:i})}):(0,V.jsx)(v.x,{margin:{horizontal:24,vertical:12},style:{color:y.w.Gray500,fontSize:"0.8rem"},children:r?"No observations found":"No materializations found"})}),(0,V.jsx)(ae.pC,{title:r?"Observation system tags":"Materialization system tags",collapsedByDefault:!0,children:h?(0,V.jsx)("div",{style:{margin:-1,maxWidth:"100%",overflowX:"auto"},children:(0,V.jsx)(se.M,{event:h,paddingLeft:24})}):(0,V.jsx)(v.x,{margin:{horizontal:24,vertical:12},style:{color:y.w.Gray500,fontSize:"0.8rem"},children:r?"No observations found":"No materializations found"})})]}),(0,V.jsx)(ae.pC,{title:"Metadata plots",children:(0,V.jsx)(oe.l,{xAxis:u,asSidebarSection:!0,groups:p,columnCount:1})})]})},Te=t(17163),Re=t(50883),Qe=t(64869),Ue=t(95460),Ve=t(85514),$e=t(52072),Be=t(27954),Je=t(54665),We=t(54335),qe=t(99986),He=t(63167),Ye=function(e){var n,t,r=e.graphNode,i=e.liveData,a=r.assetKey,s=r.definition,o=(0,$e.em)(i),l=(0,$e.mR)([a],o,"background"),d=(0,D.a)(rn,{variables:{assetKey:{path:a.path}}}).data,c=(i||{}).lastMaterialization,u="AssetNode"===(null===d||void 0===d?void 0:d.assetNodeOrError.__typename)?d.assetNodeOrError:null;if(!u)return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(en,{assetNode:s,repoAddress:null}),(0,V.jsx)(v.x,{padding:{vertical:64},children:(0,V.jsx)(H.$,{purpose:"section"})})]});var p=(0,U.kQ)(u.repository.name,u.repository.location.name),h=(0,re.U6)(u),m=h.assetMetadata,f=h.assetType,x=f||m.length>0,g=null===(n=u.configField)||void 0===n?void 0:n.configType,j=(null===(t=u.op)||void 0===t?void 0:t.metadata)&&(0,qe.D)(u.op.metadata);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(en,{assetNode:s,repoAddress:p}),(0,V.jsx)(te.N,{assetKey:a,loadedFromRepo:p,padded:!1}),(u.description||(null===j||void 0===j?void 0:j.SidebarComponent)||!x)&&(0,V.jsxs)(ae.pC,{title:"Description",children:[(0,V.jsx)(v.x,{padding:{vertical:16,horizontal:24},children:(0,V.jsx)(Je.d,{description:u.description||"No description provided"})}),u.op&&(null===j||void 0===j?void 0:j.SidebarComponent)&&(0,V.jsx)(v.x,{padding:{bottom:16,horizontal:24},children:(0,V.jsx)(j.SidebarComponent,{definition:u.op,repoAddress:p})})]}),(0,V.jsx)(Ge,{asset:u,assetLastMaterializedAt:null===c||void 0===c?void 0:c.timestamp,isSourceAsset:s.isSource,liveData:i}),(0,V.jsx)("div",{style:{borderBottom:"2px solid ".concat(y.w.Gray300)}}),(0,xe.Pz)(r)&&(0,V.jsx)(Te.x,{}),u.opVersion&&(0,V.jsx)(ae.pC,{title:"Code Version",children:(0,V.jsx)(v.x,{padding:{vertical:16,horizontal:24},children:(0,V.jsx)(Ue.G,{children:u.opVersion})})}),g&&(0,V.jsx)(ae.pC,{title:"Config",children:(0,V.jsx)(v.x,{padding:{vertical:16,horizontal:24},children:(0,V.jsx)(Y.L,{type:g,typesInScope:g.recursiveConfigTypes})})}),u.requiredResources.length>0&&(0,V.jsx)(ae.pC,{title:"Required Resources",children:(0,V.jsx)(v.x,{padding:{vertical:16,horizontal:24},children:u.requiredResources.map((function(e){return(0,V.jsxs)(We.b1,{children:[(0,V.jsx)(X.JO,{name:"resource",color:y.w.Gray700}),p?(0,V.jsx)(ee.rU,{to:(0,He.$U)(p,"/resources/".concat(e.resourceKey)),children:(0,V.jsx)(We.bZ,{children:e.resourceKey})}):(0,V.jsx)(We.bZ,{children:e.resourceKey})]},e.resourceKey)}))})}),m.length>0&&(0,V.jsx)(ae.pC,{title:"Metadata",children:(0,V.jsx)(re.mQ,{assetMetadata:m,repoLocation:null===p||void 0===p?void 0:p.location})}),f&&(0,V.jsx)(Xe,{assetType:f}),u.partitionDefinition&&(0,V.jsx)(ae.pC,{title:"Partitions",children:(0,V.jsxs)(v.x,{padding:{vertical:16,horizontal:24},flex:{direction:"column",gap:16},children:[(0,V.jsx)("p",{children:u.partitionDefinition.description}),(0,V.jsx)(Re.m,{assetKey:u.assetKey,data:l})]})})]})},Xe=function(e){var n=e.assetType;return(0,V.jsx)(ae.pC,{title:"Type",children:(0,V.jsx)(Be.Ot,{type:n})})},en=function(e){var n=e.assetNode,t=e.repoAddress,r=(0,xe.ll)(n.assetKey);return(0,V.jsxs)(v.x,{flex:{gap:4,direction:"column"},margin:{left:24,right:12,vertical:16},children:[(0,V.jsx)(ae.R8,{style:{marginBottom:0,display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:(0,V.jsx)(v.x,{children:r})}),(0,V.jsxs)(v.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,V.jsxs)(nn,{to:(0,Ve.p)(n.assetKey),children:["View in Asset Catalog ",(0,V.jsx)(X.JO,{name:"open_in_new",color:y.w.Link})]}),t&&(0,V.jsx)(Qe.d,{assetNode:n,repoAddress:t,minimal:!0})]})]})},nn=(0,h.ZP)(ee.rU).withConfig({displayName:"SidebarAssetInfo__AssetCatalogLink",componentId:"sc-qra0a8-0"})(["display:flex;gap:5px;padding:6px;margin:-6px;align-items:center;white-space:nowrap;"]),tn=(0,G.Ps)(i||(i=(0,F.Z)(["\n  fragment SidebarAssetFragment on AssetNode {\n    id\n    description\n    ...AssetNodeConfigFragment\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    freshnessPolicy {\n      maximumLagMinutes\n      cronSchedule\n      cronScheduleTimezone\n    }\n    autoMaterializePolicy {\n      policyType\n    }\n    partitionDefinition {\n      description\n    }\n    assetKey {\n      path\n    }\n    op {\n      name\n      description\n      metadata {\n        key\n        value\n      }\n    }\n    opVersion\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    requiredResources {\n      resourceKey\n    }\n\n    ...AssetNodeOpMetadataFragment\n  }\n\n  ","\n  ","\n  ","\n"])),ne.r,ye.it,re.Ws),rn=(0,G.Ps)(a||(a=(0,F.Z)(["\n  query SidebarAssetQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        ...SidebarAssetFragment\n      }\n    }\n  }\n\n  ","\n"])),tn),an=t(34570),sn=t(61794);var on=(0,G.Ps)(s||(s=(0,F.Z)(["\n  query AssetForNavigationQuery($key: AssetKeyInput!) {\n    assetOrError(assetKey: $key) {\n      ... on Asset {\n        id\n        definition {\n          id\n          opNames\n          jobNames\n          groupName\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),ln=t(65778),dn=.6,cn=.15,un=function(e){var n=(0,an.uc)(e.explorerPath.opsQuery,e.fetchOptions),t=n.fetchResult,r=n.assetGraphData,i=n.graphQueryItems,a=n.graphAssetKeys,s=n.allAssetKeys,o=n.applyingEmptyDefault,l=(0,ln.le)(a),d=l.liveDataByNode,c=l.liveDataRefreshState;return(0,V.jsx)(P.g,{allowStaleData:!0,queryResult:t,children:function(){return r&&s?(0,xe.vm)(r)?(0,V.jsx)(m.t,{icon:"error",title:"Cycle detected",description:"Assets dependencies form a cycle"}):(0,V.jsx)(pn,(0,p.Z)({assetGraphData:r,allAssetKeys:s,graphQueryItems:i,applyingEmptyDefault:o,liveDataRefreshState:c,liveDataByNode:d},e),e.explorerPath.pipelineName):(0,V.jsx)(m.t,{icon:"error",title:"Query Error"})}})},pn=function(e){var n=e.options,t=e.setOptions,r=e.explorerPath,i=e.onChangeExplorerPath,a=e.onNavigateToSourceAssetNode,s=e.liveDataRefreshState,h=e.liveDataByNode,m=e.assetGraphData,j=e.graphQueryItems,N=e.applyingEmptyDefault,K=e.fetchOptions,P=e.fetchOptionFilters,F=function(){var e=(0,sn.x)();return Z.useCallback(function(){var n=(0,c.Z)((0,o.Z)().mark((function n(t){var r,i,a;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.query({query:on,variables:{key:t}});case 2:if(r=n.sent,"Asset"!==(null===(i=r.data)||void 0===i?void 0:i.assetOrError.__typename)||null===i||void 0===i||!i.assetOrError.definition){n.next=7;break}return a=i.assetOrError.definition,n.abrupt("return",{assetKey:t,opNames:a.opNames,jobName:a.jobNames.find((function(e){return!(0,xe.pv)(e)}))||null,groupName:a.groupName,repoAddress:a.repository?(0,U.kQ)(a.repository.name,a.repository.location.name):null});case 7:return n.abrupt("return",{assetKey:t,opNames:[],jobName:null,groupName:null,repoAddress:null});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e])}(),D=(0,z.oJ)(m),G=D.layout,T=D.loading,R=D.async,Q=Z.useRef(),B=Z.useState(null),H=(0,u.Z)(B,2),Y=H[0],X=H[1],ee=r.opNames[r.opNames.length-1].split(","),ne=Object.values(m.nodes).filter((function(e){return ee.includes((0,xe.Je)(e.definition.assetKey))})),te=ne[ne.length-1],re=ne.map((function(e){return e.definition})),ie=N?j.map((function(e){return e.node})):Object.values(m.nodes).map((function(e){return e.definition})),ae=Z.useCallback(function(){var e=(0,c.Z)((0,o.Z)().mark((function e(n,t,s){var c,u,h,f,x,y,g,v,j,b,N,K;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),c=(0,xe.Je)(t),u=null===s||void 0===s?void 0:s.definition){e.next=9;break}return e.t0=a,e.next=7,F(t);case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:if(h=c,!n.shiftKey&&!n.metaKey){e.next=35;break}if(f=[c],!(n.shiftKey&&ne.length&&s)){e.next=33;break}x=(0,d.Z)(ne).reverse(),y=(0,l.Z)(x),e.prev=15,y.s();case 17:if((g=y.n()).done){e.next=25;break}if(v=g.value,!(j=mn({from:v,to:s,graph:m})).length){e.next=23;break}return f=j,e.abrupt("break",25);case 23:e.next=17;break;case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(15),y.e(e.t2);case 30:return e.prev=30,y.f(),e.finish(30);case 33:b=r.opNames[0].split(","),h=(b.includes(c)?S()(b,c):w()([].concat((0,d.Z)(b),(0,d.Z)(f)))).join(",");case 35:(N=null===G||void 0===G?void 0:G.nodes[h[h.length-1]])&&(null===(K=Q.current)||void 0===K||K.zoomToSVGCoords(N.bounds.x,N.bounds.y,!0)),i((0,p.Z)((0,p.Z)({},r),{},{opNames:[h],opsQuery:u?r.opsQuery:"".concat(r.opsQuery,',++"').concat(c,'"++'),pipelineName:r.pipelineName}),"replace");case 38:case"end":return e.stop()}}),e,null,[[15,27,30,33]])})));return function(n,t,r){return e.apply(this,arguments)}}(),[r,i,a,F,te,m,G]),se=Z.useState(null),oe=(0,u.Z)(se,2),le=oe[0],de=oe[1],ce=le!==G;Z.useEffect((function(){ce&&G&&Q.current&&(te?Q.current.focus():Q.current.autocenter(!1),de(G))}),[ce,te,G,Q]);var ue=!(!G||!Object.keys(G.groups).length);return(0,V.jsx)(f.OS,{identifier:"explorer",firstInitialPercent:70,firstMinSize:400,first:(0,V.jsxs)(x.S,{region:"graph",children:[0===j.length?(0,V.jsx)(_.LS,{nodeType:"asset",isGraph:!0}):N?(0,V.jsx)(_.K4,{nodeType:"asset"}):0===Object.keys(m.nodes).length?(0,V.jsx)(_.VQ,{nodeType:"asset"}):void 0,T||!G?(0,V.jsx)(_.W_,{async:R,nodeType:"asset"}):(0,V.jsx)(C.l,{ref:function(e){return Q.current=e||void 0},interactor:C.l.Interactors.PanAndZoom,graphWidth:G.width,graphHeight:G.height,graphHasNoMinimumZoom:ue,onClick:function(){return i((0,p.Z)((0,p.Z)({},r),{},{pipelineName:r.pipelineName,opNames:[]}),"replace")},onArrowKeyDown:function(e,n){if(G){var t=(0,p.Z)((0,p.Z)({},G),{},{nodes:b()(G.nodes,(function(e){var n;return!(null===(n=m.nodes[e.id])||void 0===n||!n.definition)}))}),r=(0,E.mh)(t,te.id,n),i=r&&m.nodes[r];i&&Q.current&&(ae(e,i.assetKey,i),Q.current.zoomToSVGBox(G.nodes[r].bounds,!0))}},onDoubleClick:function(e){var n;null===(n=Q.current)||void 0===n||n.autocenter(!0),e.stopPropagation()},maxZoom:1.2,maxAutocenterZoom:1,children:function(e){var n=e.scale;return(0,V.jsxs)(hn,{width:G.width,height:G.height,children:[(0,V.jsx)(L.i,{highlighted:Y,edges:G.edges,strokeWidth:ue?Math.max(4,3/n):4,baseColor:ue&&n<cn?y.w.Gray400:y.w.KeylineGray}),Object.values(G.groups).sort((function(e,n){return e.id.length-n.id.length})).map((function(e){return(0,V.jsx)("foreignObject",(0,p.Z)((0,p.Z)({},e.bounds),{},{onDoubleClick:function(n){if(Q.current){var t=Q.current.scaleForSVGBounds(e.bounds.width,e.bounds.height);Q.current.zoomToSVGBox(e.bounds,!0,.9*t),n.stopPropagation()}},children:(0,V.jsx)(J.l,{group:e,scale:n})}),e.id)})),Object.values(G.nodes).map((function(e){var t=e.id,r=e.bounds,i=m.nodes[t],a=JSON.parse(t);if(!(ue&&n<cn))return(0,Z.createElement)("foreignObject",(0,p.Z)((0,p.Z)({},r),{},{key:t,onMouseEnter:function(){return X(t)},onMouseLeave:function(){return X(null)},onClick:function(e){return ae(e,{path:a},i)},onDoubleClick:function(e){var n;null===(n=Q.current)||void 0===n||n.zoomToSVGBox(r,!0,1.2),e.stopPropagation()},style:{overflow:"visible"}}),i?n<dn?(0,V.jsx)(W.t$,{definition:i.definition,liveData:h[i.id],selected:ne.includes(i)}):(0,V.jsx)(W.p4,{definition:i.definition,liveData:h[i.id],selected:ne.includes(i)}):(0,V.jsx)(q.w,{assetKey:{path:a}}))}))]})}}),t&&(0,V.jsx)(I.cY,{children:(0,V.jsx)(g.X,{format:"switch",label:"View as Asset Graph",checked:n.preferAssetRendering,onChange:function(){var e;i((0,p.Z)((0,p.Z)({},r),{},{opNames:(null===(e=re[0])||void 0===e?void 0:e.opNames)||[]}),"replace"),t((0,p.Z)((0,p.Z)({},n),{},{preferAssetRendering:!n.preferAssetRendering}))}})}),(0,V.jsx)(v.x,{flex:{direction:"column",alignItems:"flex-end",gap:8},style:{position:"absolute",right:12,top:8},children:(0,V.jsxs)(v.x,{flex:{alignItems:"center",gap:12},children:[(0,V.jsx)(O.xi,{refreshState:s,dataDescription:"materializations"}),(0,V.jsx)(k.y,{preferredJobName:r.pipelineName,scope:re.length?{selected:re.filter((function(e){return e.isObservable}))}:{all:ie.filter((function(e){return e.isObservable}))}}),(0,V.jsx)(A.XE,{preferredJobName:r.pipelineName,liveDataForStale:h,scope:re.length?{selected:re}:{all:ie}})]})}),(0,V.jsxs)(I.U0,{children:[P,(0,V.jsx)(M.j,{items:j,value:r.opsQuery,placeholder:"Type an asset subset\u2026",onChange:function(e){return i((0,p.Z)((0,p.Z)({},r),{},{opsQuery:e}),"replace")},popoverPosition:"bottom-left"})]})]}),second:1===ne.length&&ne[0]?(0,V.jsx)(I.Ui,{children:(0,V.jsx)(I.zI,{children:(0,V.jsx)(x.S,{region:"asset sidebar",resetErrorOnChange:[ne[0].id],children:(0,V.jsx)(Ye,{graphNode:ne[0],liveData:h[ne[0].id]})})})}):K.pipelineSelector?(0,V.jsx)(I.Ui,{children:(0,V.jsx)(I.zI,{children:(0,V.jsx)(x.S,{region:"asset job sidebar",children:(0,V.jsx)($,{pipelineSelector:K.pipelineSelector})})})}):null})},hn=h.ZP.svg.withConfig({displayName:"AssetGraphExplorer__SVGContainer",componentId:"sc-hnrxmo-0"})(["overflow:visible;border-radius:0;"]),mn=function e(n){var t=n.graph,r=n.from,i=n.to,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!r)return[];if(r.id===i.id)return[(0,xe.Je)(i.definition.assetKey)];if(0===a.length&&"upstream"===function(e){for(var n=e.graph,t=e.from,r=e.to,i=[t];i.length;){var a=i.pop(),s=(0,d.Z)(Object.keys(n.downstream[a.id]||{})).map((function(e){return n.nodes[e]})).filter(Boolean);if(s.some((function(e){return e.id===r.id})))return"downstream";i.push.apply(i,(0,d.Z)(s))}return"upstream"}({graph:t,from:r,to:i})){var s=[i,r];r=s[0],i=s[1]}var o,c=(0,d.Z)(Object.keys(t.downstream[r.id]||{})).map((function(e){return t.nodes[e]})).filter(Boolean),u=[],p=(0,l.Z)(c);try{for(p.s();!(o=p.n()).done;){var h=o.value;if(!a.includes(h.id)){var m=e({graph:t,from:h,to:i},[].concat((0,d.Z)(a),[r.id]));m.length&&u.push.apply(u,[(0,xe.Je)(r.definition.assetKey)].concat((0,d.Z)(m)))}}}catch(f){p.e(f)}finally{p.f()}return w()(u)}},3060:function(e,n,t){t.d(n,{l:function(){return f}});var r=t(60319),i=t(47515),a=t(83473),s=t(32375),o=t(32667),l=t(57103),d=(t(78193),t(97412)),c=t(88949),u=t(66708),p=t(63167),h=t(43795),m=t(35936),f=function(e){var n=e.group,t=e.scale,r=n.repositoryLocationName,f=n.repositoryDisambiguationRequired,g=n.repositoryName,v=n.groupName;return(0,m.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[t>h.md&&(0,m.jsx)(i.x,{flex:{alignItems:"flex-end"},style:{height:70},children:(0,m.jsxs)(a.fv,{style:{fontWeight:600,userSelect:"none",fontSize:t>h.CZ?"16px":"32px",display:"flex",gap:6},children:[(0,m.jsx)(s.JO,{name:"asset_group",color:o.w.Gray400,size:t>h.CZ?20:48}),(0,m.jsxs)(i.x,{flex:{direction:"column"},children:[(0,m.jsx)(d.rU,{style:{color:o.w.Gray400},onClick:function(e){return e.stopPropagation()},to:(0,p.rO)(g,r,"/asset-groups/".concat(v)),children:v}),f&&(0,m.jsx)(y,{style:{marginBottom:"0.5em"},children:(0,c.R9)((0,u.At)(g,r),{maxLength:45})})]})]})}),(0,m.jsx)(x,{style:{inset:0,top:75,position:"absolute",background:t<h.md?"rgba(234, 234, 234, 1)":"rgba(217, 217, 217, 0.25)"}}),t<h.md?(0,m.jsx)(i.x,{flex:{justifyContent:"center",alignItems:"center"},style:{inset:0,position:"absolute",fontSize:"".concat(12/t,"px"),userSelect:"none"},children:(0,m.jsxs)(i.x,{flex:{direction:"column",alignItems:"center"},style:{fontWeight:600,fontFamily:l.b.monospace},children:[v,f&&(0,m.jsx)(y,{children:(0,c.R9)((0,u.At)(g,r),{maxLength:45})})]})}):void 0]})},x=r.ZP.div.withConfig({displayName:"AssetGroupNode__GroupOutline",componentId:"sc-osbgfp-0"})(["width:100%;border-radius:10px;pointer-events:none;"]),y=r.ZP.div.withConfig({displayName:"AssetGroupNode__GroupRepoName",componentId:"sc-osbgfp-1"})(["font-size:0.8em;line-height:0.6em;white-space:nowrap;color:",";"],o.w.Gray400)},7055:function(e,n,t){t.d(n,{w:function(){return u}});var r=t(60319),i=t(32375),a=t(32667),s=t(57103),o=t(78193),l=t(88949),d=t(50545),c=t(35936),u=o.memo((function(e){var n=e.assetKey,t=n.path[n.path.length-1];return(0,c.jsxs)(p,{children:[(0,c.jsx)(i.JO,{name:"open_in_new",color:a.w.Link}),(0,c.jsx)("span",{className:"label",title:t,children:(0,l.R9)(t,{maxLength:d.ASSET_LINK_NAME_MAX_LENGTH})})]})})),p=r.ZP.div.withConfig({displayName:"ForeignNode__AssetNodeLinkContainer",componentId:"sc-f3rzsb-0"})(["display:flex;padding:4px 8px 6px;margin-top:26px;line-height:30px;font-family:",";color:",";align-items:center;font-weight:600;gap:4px;&:hover .label{color:",";text-decoration:underline;}"],s.b.monospace,a.w.Link,a.w.Link)},34570:function(e,n,t){t.d(n,{BK:function(){return N},uc:function(){return v}});var r,i=t(71171),a=t(68079),s=t(41361),o=t(90239),l=t(31623),d=t(276),c=t.n(d),u=t(67656),p=t.n(u),h=t(69590),m=t.n(h),f=t(78193),x=t(62709),y=t(1497),g=t(9938);function v(e,n){var t,r=(0,o.a)(w,{notifyOnNetworkStatusChange:!0,variables:{pipelineSelector:n.pipelineSelector,groupSelector:n.groupSelector}}),i=null===(t=r.data)||void 0===t?void 0:t.assetNodes,a=f.useMemo((function(){if(void 0===i)return{graphAssetKeys:[],graphQueryItems:[],assetGraphData:null,applyingEmptyDefault:!1};var t=i;n.hideNodesMatching&&(t=m()(t,n.hideNodesMatching));var r=j(t),a=(0,x.V)(r,e),s=a.all,o=a.applyingEmptyDefault,l=(0,g.VZ)(s.map((function(e){return e.node})));return n.hideEdgesToNodesOutsideQuery&&b(l,i),{allAssetKeys:t.map((function(e){return e.assetKey})),graphAssetKeys:s.map((function(e){return{path:e.node.assetKey.path}})),assetGraphData:l,graphQueryItems:r,applyingEmptyDefault:o}}),[i,e,n.hideEdgesToNodesOutsideQuery,n.hideNodesMatching]);return{fetchResult:r,assetGraphData:a.assetGraphData,graphQueryItems:a.graphQueryItems,graphAssetKeys:a.graphAssetKeys,allAssetKeys:a.allAssetKeys,applyingEmptyDefault:a.applyingEmptyDefault}}var j=function(e){var n,t={},r=(0,s.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=(0,g.Je)(i.assetKey);t[a]={node:i,name:a,inputs:i.dependencyKeys.map((function(e){return{dependsOn:[{solid:{name:(0,g.Je)(e)}}]}})),outputs:i.dependedByKeys.map((function(e){return{dependedBy:[{solid:{name:(0,g.Je)(e)}}]}}))}}}catch(o){r.e(o)}finally{r.f()}return Object.values(t)},b=function(e,n){for(var t=c()(n,(function(e){return(0,g.Wu)(e.assetKey)})),r=function(e){return!!t[e]},i=0,a=Object.keys(e.upstream);i<a.length;i++)for(var s=a[i],o=0,l=Object.keys(e.upstream[s]);o<l.length;o++){var d=l[o];!e.nodes[d]&&r(s)&&(delete e.upstream[s][d],delete e.downstream[d][s])}for(var u=0,p=Object.keys(e.downstream);u<p.length;u++)for(var h=p[u],m=0,f=Object.keys(e.downstream[h]);m<f.length;m++){var x=f[m];!e.nodes[x]&&r(h)&&(delete e.upstream[x][h],delete e.downstream[h][x])}},N=function(e,n){var t=p()(e,(function(e){return e.name})),r=t[(0,g.Je)(n)];if(!r)return{upstream:0,downstream:0};return{upstream:function e(n,r){var i=t[n].inputs.flatMap((function(e){return e.dependsOn.map((function(e){return e.solid.name}))})).filter((function(e){return e!==n}));return Math.max.apply(Math,[r].concat((0,a.Z)(i.map((function(n){return e(n,r+1)})))))}(r.name,0),downstream:function e(n,r){var i=t[n].outputs.flatMap((function(e){return e.dependedBy.map((function(e){return e.solid.name}))})).filter((function(e){return e!==n}));return Math.max.apply(Math,[r].concat((0,a.Z)(i.map((function(n){return e(n,r+1)})))))}(r.name,0)}},w=(0,l.Ps)(r||(r=(0,i.Z)(["\n  query AssetGraphQuery($pipelineSelector: PipelineSelector, $groupSelector: AssetGroupSelector) {\n    assetNodes(pipeline: $pipelineSelector, group: $groupSelector) {\n      id\n      ...AssetNodeForGraphQuery\n    }\n  }\n\n  fragment AssetNodeForGraphQuery on AssetNode {\n    id\n    groupName\n    hasMaterializePermission\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    dependencyKeys {\n      path\n    }\n    dependedByKeys {\n      path\n    }\n    ...AssetNodeFragment\n  }\n\n  ","\n"])),y.zU)},65532:function(e,n,t){t.d(n,{M:function(){return f}});var r=t(68079),i=t(96234),a=t(60319),s=t(83473),o=t(92555),l=t(47515),d=t(32375),c=t(32667),u=(t(78193),t(79962)),p=t(68506),h=t(35936),m=[p.H.AssetEventDataVersion.valueOf(),p.H.AssetEventDataVersionDeprecated.valueOf(),p.H.AssetEventCodeVersion.valueOf()],f=function(e){var n=e.event,t=e.paddingLeft,a=e.collapsible,c=(0,u.U)("show-asset-system-tags",Boolean),f=(0,i.Z)(c,2),y=f[0],g=f[1];return a&&!y?(0,h.jsx)(s.YS,{children:(0,h.jsx)(o.Z,{onClick:function(){return g(!0)},children:(0,h.jsxs)(l.x,{flex:{alignItems:"center"},children:[(0,h.jsxs)("span",{children:["Show tags (",(null===n||void 0===n?void 0:n.tags.length)||0,")"]}),(0,h.jsx)(d.JO,{name:"arrow_drop_down",style:{transform:"rotate(0deg)"}})]})})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(x,{children:(0,h.jsx)("tbody",{children:null!==n&&void 0!==n&&n.tags.length?(0,r.Z)(n.tags).sort((function(e,n){return m.indexOf(n.key)-m.indexOf(e.key)})).map((function(e){return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{style:{paddingLeft:t},children:(0,h.jsx)(s.fv,{children:e.key.replace(p.H.Namespace,"")})}),(0,h.jsx)("td",{children:e.value})]},e.key)})):(0,h.jsx)("tr",{children:(0,h.jsx)("td",{style:{paddingLeft:t},children:"No tags to display."})})})}),a&&(0,h.jsx)(s.YS,{children:(0,h.jsx)(o.Z,{onClick:function(){return g(!1)},children:(0,h.jsxs)(l.x,{flex:{alignItems:"center"},children:[(0,h.jsx)("span",{children:"Hide tags"}),(0,h.jsx)(d.JO,{name:"arrow_drop_down",style:{transform:"rotate(180deg)"}})]})})})]})},x=a.ZP.table.withConfig({displayName:"AssetEventSystemTags__AssetEventSystemTagsTable",componentId:"sc-186zkuz-0"})(["width:100%;border-spacing:0;border-collapse:collapse;tr td:first-child{max-width:300px;word-wrap:break-word;width:25%;}tr td{border:1px solid ",";padding:8px 12px;font-size:14px;vertical-align:top;}"],c.w.KeylineGray)},12478:function(e,n,t){t.d(n,{Q:function(){return g},i:function(){return y}});var r,i=t(71171),a=t(96234),s=t(68079),o=t(31623),l=t(47515),d=t(44229),c=t(92555),u=t(78193),p=t(97412),h=t(40854),m=t(85514),f=t(35936),x=function(e){var n=e.lineage_info,t=e.timestamp,r=1===n.partitions.length?"Partition":"Partitions",i=n.partitions.map((function(e){return'"'.concat(e,'"')})).join(", "),a=(0,m.p)(n.assetKey,{asOf:t});return(0,f.jsxs)(l.x,{margin:{bottom:4},children:[n.partitions.length>0?"".concat(r," ").concat(i," of "):"",(0,f.jsx)(d.u,{content:(0,f.jsxs)(f.Fragment,{children:["View snapshot as of"," ",(0,f.jsx)(h.E,{timestamp:{ms:Number(t)},timeFormat:{showSeconds:!0,showTimezone:!0}})]}),modifiers:{offset:{enabled:!0,options:{offset:[0,16]}}},placement:"right",children:(0,f.jsx)(p.rU,{to:a,children:(0,f.jsx)(l.x,{flex:{display:"inline-flex",alignItems:"center"},children:n.assetKey.path.map((function(e,n){return(0,f.jsx)("span",{children:e},n)})).reduce((function(e,n,t){return[].concat((0,s.Z)(e),[t>0?(0,f.jsxs)(u.Fragment,{children:["\xa0",">","\xa0"]},"".concat(t,"-space")):null,n])}),[])})})})]})},y=function(e){var n=e.elements,t=e.timestamp,r=u.useState(!0),i=(0,a.Z)(r,2),s=i[0],o=i[1];return(0,f.jsxs)("div",{children:[n.length>5&&(0,f.jsx)(c.Z,{onClick:function(){return o(!s)},children:s?"Show More":"Show Less"}),(s?n.slice(n.length-5):n).map((function(e,n){return(0,f.jsx)(x,{lineage_info:e,timestamp:t},n)}))]})},g=(0,o.Ps)(r||(r=(0,i.Z)(["\n  fragment AssetLineageFragment on AssetLineageInfo {\n    assetKey {\n      path\n    }\n    partitions\n  }\n"])))},94403:function(e,n,t){t.d(n,{l:function(){return g}});var r=t(41361),i=t(68079),a=t(96234),s=t(47515),o=t(32667),l=t(83473),d=t(67445),c=t(45519),u=t(92578),p=t.n(u),h=t(23662),m=t.n(h),f=t(78193),x=t(98813),y=t(35936),g=function(e){var n=f.useState(null),t=(0,a.Z)(n,2),r=t[0],u=t[1],p=f.useMemo((function(){return(0,i.Z)(e.groups).reverse()}),[e.groups]),h=v(p,e.xAxis),m=Object.keys(h).slice(0,20).sort();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr ".repeat(e.columnCount||2),justifyContent:"stretch"},children:m.map((function(n){return(0,y.jsx)(s.x,{style:{width:"100%"},border:{side:"bottom",width:1,color:o.w.KeylineGray},children:(0,y.jsxs)(s.x,{style:{width:"100%"},border:{side:"right",width:1,color:o.w.KeylineGray},children:[e.asSidebarSection?(0,y.jsx)(s.x,{padding:{horizontal:24,top:8},flex:{justifyContent:"space-between"},children:(0,y.jsx)(l.YS,{style:{fontWeight:700},children:n})}):(0,y.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:{side:"bottom",width:1,color:o.w.KeylineGray},flex:{justifyContent:"space-between"},children:(0,y.jsx)(l.pm,{children:n})}),(0,y.jsx)(s.x,{padding:{horizontal:24,vertical:16},children:(0,y.jsx)(x.K,{label:n,width:"100%",data:h[n],xHover:r,onHoverX:function(e){return e!==r&&u(e)}})})]})},n)}))}),0===m.length?e.asSidebarSection?(0,y.jsx)(s.x,{margin:{horizontal:24,vertical:12},style:{color:o.w.Gray500,fontSize:"0.8rem"},children:"No numeric metadata entries available to be graphed."}):(0,y.jsx)(s.x,{padding:{horizontal:24,top:64},children:(0,y.jsx)(d.t,{shrinkable:!0,icon:"asset_plot",title:"Asset plots are automatically generated by metadata",description:"Include numeric metadata entries in your materializations and observations to see data graphed by time or partition.",action:(0,y.jsx)(c.fr,{href:"https://docs.dagster.io/concepts/assets/software-defined-assets#recording-materialization-metadata",children:"View documentation"})})}):"partition"===e.xAxis&&(0,y.jsx)(s.x,{padding:{vertical:16,horizontal:24},style:{color:o.w.Gray400},children:"When graphing values by partition, the highest data point for each materialized event label is displayed."})]})},v=function(e,n){var t,a={},s=m()(p()(e,(function(e){var n;return((null===(n=e.latest)||void 0===n?void 0:n.metadataEntries)||[]).filter((function(e){return["IntMetadataEntry","FloatMetadataEntry"].includes(e.__typename)})).map((function(e){return e.label}))}))),o=function(e,t){var r=t.x,i=t.y,s=a[e]||{minY:0,maxY:0,minXNumeric:0,maxXNumeric:0,values:[],xAxis:n};if("partition"===n){var o=s.values.find((function(e){return e.x===r}));if(o)return void(isNaN(i)||(o.y=i))}s.values.push({xNumeric:"number"===typeof r?r:s.values.length,x:r,y:i}),a[e]=s},l=(0,r.Z)(e);try{for(l.s();!(t=l.n()).done;){var d=t.value,c=d.partition,u=d.latest,h=("partition"===n?c:Number(null===u||void 0===u?void 0:u.timestamp))||null;if(null!==h){var f,x=(0,r.Z)(s);try{var y=function(){var e=f.value,n=null===u||void 0===u?void 0:u.metadataEntries.find((function(n){return n.label===e}));if(!n)return o(e,{x:h,y:NaN}),"continue";var t=NaN;"IntMetadataEntry"===n.__typename&&(t=null!==n.intValue?n.intValue:parseInt(n.intRepr)),"FloatMetadataEntry"===n.__typename&&null!==n.floatValue&&(t=n.floatValue),o(e,{x:h,y:t})};for(x.s();!(f=x.n()).done;)y()}catch(w){x.e(w)}finally{x.f()}}}}catch(w){l.e(w)}finally{l.f()}for(var g=0,v=Object.values(a);g<v.length;g++){var j=v[g],b=j.values.map((function(e){return e.xNumeric})),N=j.values.map((function(e){return e.y})).filter((function(e){return!isNaN(e)}));j.minXNumeric=Math.min.apply(Math,(0,i.Z)(b)),j.maxXNumeric=Math.max.apply(Math,(0,i.Z)(b)),j.minY=Math.min.apply(Math,(0,i.Z)(N)),j.maxY=Math.max.apply(Math,(0,i.Z)(N))}return a}},46634:function(e,n,t){t.d(n,{U6:function(){return u},Ws:function(){return h},mQ:function(){return p}});var r,i=t(71171),a=t(31623),s=t(47515),o=t(90519),l=(t(78193),t(27954)),d=t(84674),c=t(35936),u=function(e){return{assetType:e.type?e.type:void 0,assetMetadata:e.metadataEntries||[]}},p=function(e){var n=e.assetMetadata,t=e.repoLocation,r=n.map((function(e){return{key:e.label,value:(0,c.jsx)(d.BL,{entry:e,repoLocation:t})}}));return(0,c.jsx)(s.x,{padding:{vertical:16,horizontal:24},children:(0,c.jsx)(o.nZ,{rows:r})})},h=(0,a.Ps)(r||(r=(0,i.Z)(["\n  fragment AssetNodeOpMetadataFragment on AssetNode {\n    id\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    type {\n      ...DagsterTypeFragment\n    }\n  }\n\n  ","\n  ","\n"])),d.it,l.rB)},8078:function(e,n,t){t.d(n,{W:function(){return s},r:function(){return o}});var r=t(95714),i=(t(78193),t(23555)),a=t(35936),s=function(e){var n=e.policy;return(0,a.jsx)(r.V,{children:n.policyType===i.g0H.LAZY?"Lazy":"Eager"})},o=function(e){return(0,a.jsxs)(a.Fragment,{children:["This asset is automatically re-materialized when at least one of the following are true:",(0,a.jsxs)("ul",{style:{paddingLeft:20},children:[(0,a.jsx)("li",{children:"it is missing"}),(0,a.jsx)("li",{children:"it has a freshness policy that requires more up-to-date data"}),(0,a.jsx)("li",{children:"any of its descendants have a freshness policy that require more up-to-date data"}),e.policyType===i.g0H.EAGER&&(0,a.jsx)("li",{children:"any of its parent assets / partitions have newer data"})]}),"and none of the following are true:",(0,a.jsxs)("ul",{style:{paddingLeft:20,marginBottom:0},children:[(0,a.jsx)("li",{children:"any of its parent assets / partitions are missing"}),(0,a.jsx)("li",{children:"any of its ancestor assets / partitions have ancestors of their own with newer data"})]})]})}},15117:function(e,n,t){t.d(n,{j:function(){return c}});var r=t(47515),i=t(16255),a=t(62459),s=t(78193),o=t(97412),l=t(89622),d=t(35936),c=function(e){var n=e.liveData,t=e.border,c=n||{},u=c.inProgressRunIds,p=void 0===u?[]:u,h=c.unstartedRunIds,m=void 0===h?[]:h;return 0===p.length&&0===m.length?null:(0,d.jsx)(r.x,{padding:{vertical:16,left:24,right:12},border:t,children:(0,d.jsx)(i.b,{intent:"info",icon:(0,d.jsx)(a.$,{purpose:"body-text"}),title:(0,d.jsxs)("div",{style:{fontWeight:400},children:[p.length>0&&(0,d.jsxs)(d.Fragment,{children:[p.map((function(e){return(0,d.jsxs)(s.Fragment,{children:["Run ",(0,d.jsx)(o.rU,{to:"/runs/".concat(e),children:(0,l.EI)({id:e})})]},e)}))," ",1===p.length?"is":"are"," currently refreshing this asset."]}),m.length>0&&(0,d.jsxs)(d.Fragment,{children:[m.map((function(e){return(0,d.jsxs)(s.Fragment,{children:["Run ",(0,d.jsx)(o.rU,{to:"/runs/".concat(e),children:(0,l.EI)({id:e})})]},e)}))," ",1===m.length?"has":"have"," started and will refresh this asset."]})]})})})}},17163:function(e,n,t){t.d(n,{x:function(){return l}});var r=t(47515),i=t(32667),a=t(16255),s=t(32375),o=(t(78193),t(35936)),l=function(){return(0,o.jsx)(r.x,{padding:{vertical:16,left:24,right:12},border:{side:"bottom",width:1,color:i.w.KeylineGray},children:(0,o.jsx)(a.b,{intent:"info",icon:(0,o.jsx)(s.JO,{name:"history_toggle_off",size:16,color:i.w.Blue700,style:{marginTop:1}}),title:(0,o.jsx)("div",{style:{fontWeight:400},children:"This asset depends on earlier partitions of itself. "})})})}},13167:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(47515),i=t(16255),a=(t(78193),t(97412)),s=t(89622),o=t(35936),l=function(e){var n=e.run,t=e.border,l=e.padding,d=void 0===l?{vertical:16,left:24,right:12}:l;return n?(0,o.jsx)(r.x,{padding:d,border:t,children:(0,o.jsx)(i.b,{intent:"error",title:(0,o.jsxs)("div",{style:{fontWeight:400},children:["Run ",(0,o.jsx)(a.rU,{to:"/runs/".concat(n.id),children:(0,s.EI)(n)})," failed to materialize this asset."]})})}):null}},77647:function(e,n,t){t.d(n,{y:function(){return g}});var r=t(32723),i=t(34795),a=t(96234),s=t(61794),o=t(44229),l=t(45519),d=t(32375),c=t(62459),u=t(78193),p=t(80005),h=t(1360),m=t(66708),f=t(9610),x=t(30559),y=t(35936),g=function(e){var n=e.scope,t=e.preferredJobName,m=e.intent,f=void 0===m?"none":m,g=(0,(0,h.C)().useLaunchWithTelemetry)(),j=u.useState({type:"none"}),b=(0,a.Z)(j,2),N=b[0],w=b[1],K=(0,s.x)(),S="selected"in n?n.selected:n.all;if(!S.length)return(0,y.jsx)("span",{});var Z=S.length>1?" (".concat(S.length,")"):"",O="selected"in n?"Observe selected".concat(Z):n.skipAllTerm?"Observe".concat(Z):"Observe sources ".concat(Z);if(!S.every((function(e){return e.hasMaterializePermission})))return(0,y.jsx)(o.u,{content:"You do not have permission to observe source assets",children:(0,y.jsx)(l.zx,{intent:f,icon:(0,y.jsx)(d.JO,{name:"observation"}),disabled:!0,children:O})});var A=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i,a,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loading"!==N.type){e.next=2;break}return e.abrupt("return");case 2:return w({type:"loading"}),e.next=5,K.query({query:x.U2,variables:{assetKeys:S.map((function(e){return{path:e.assetKey.path}}))}});case 5:if(!(i=e.sent).data.assetNodeDefinitionCollisions.length){e.next=10;break}return(0,p._)((0,x.VF)(i.data)),w({type:"none"}),e.abrupt("return");case 10:return a=i.data.assetNodes,s=n.shiftKey,e.next=14,v(K,a,s,t);case 14:if("error"!==(o=e.sent).type){e.next=19;break}return(0,p._)({title:"Unable to observe",body:o.error}),w({type:"none"}),e.abrupt("return");case 19:if("single-run"!==o.type){e.next=25;break}return e.next=22,g({executionParams:o.executionParams},"toast");case 22:w({type:"none"}),e.next=26;break;case 25:w(o);case 26:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,y.jsx)(l.zx,{intent:f,onClick:A,icon:"loading"===N.type?(0,y.jsx)(c.$,{purpose:"body-text"}):(0,y.jsx)(d.JO,{name:"observation"}),children:O})};function v(e,n,t,r){return j.apply(this,arguments)}function j(){return(j=(0,i.Z)((0,r.Z)().mark((function e(n,t,i,a){var s,o,l,d,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.some((function(e){return!e.isSource}))){e.next=2;break}return e.abrupt("return",{type:"error",error:"One or more non-source assets are selected and cannot be observed."});case 2:if(!t.some((function(e){return!e.isObservable}))){e.next=4;break}return e.abrupt("return",{type:"error",error:"One or more of the selected source assets are unversioned and cannot be observed."});case 4:if(l=(0,m.kQ)((null===(s=t[0])||void 0===s?void 0:s.repository.name)||"",(null===(o=t[0])||void 0===o?void 0:o.repository.location.name)||""),d=(0,f.Uz)(l),t.every((function(e){return e.repository.name===l.name&&e.repository.location.name===l.location}))){e.next=8;break}return e.abrupt("return",{type:"error",error:"Assets must be in ".concat(d," to be materialized together.")});case 8:if(c=(0,x.ZP)(t,a)){e.next=11;break}return e.abrupt("return",{type:"error",error:"Assets must be in the same job to be observed together."});case 11:return e.abrupt("return",{type:"single-run",executionParams:(0,x.Ot)(l,c,t,[])});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},64869:function(e,n,t){t.d(n,{D:function(){return m},d:function(){return h}});var r,i=t(71171),a=t(31623),s=t(47515),o=t(32375),l=t(83473),d=(t(78193),t(97412)),c=t(9938),u=t(63167),p=t(35936),h=function(e){var n=e.assetNode,t=e.repoAddress,r=e.minimal,i=n.assetKey,a=n.graphName,h=n.opNames,m=n.jobNames,f=h.length;if(!f)return null;if(!a){var x=h[0];if((0,c.ll)(i)===x)return null;var y=(0,u.$U)(t,"/ops/".concat(x));return(0,p.jsxs)(s.x,{flex:{gap:4,alignItems:"center"},children:[(0,p.jsx)(o.JO,{name:"op",size:16}),(0,p.jsx)(l.fv,{children:(0,p.jsx)(d.rU,{to:y,children:x})})]})}return m.length?(0,p.jsxs)(s.x,{flex:{gap:4,alignItems:"center"},children:[(0,p.jsx)(o.JO,{name:"schema",size:16}),r?(0,p.jsx)(d.rU,{to:(0,u.$U)(t,"/graphs/".concat(m[0],"/").concat(a,"/")),children:"View graph"}):(0,p.jsxs)(l.fv,{children:[(0,p.jsx)(d.rU,{to:(0,u.$U)(t,"/graphs/".concat(m[0],"/").concat(a,"/")),children:a})," (".concat(1===f?"1 op":"".concat(f," ops"),")")]})]}):null},m=(0,a.Ps)(r||(r=(0,i.Z)(["\n  fragment UnderlyingOpsAssetNodeFragment on AssetNode {\n    id\n    assetKey {\n      path\n    }\n    graphName\n    opNames\n    jobNames\n  }\n"])))},95460:function(e,n,t){t.d(n,{G:function(){return a}});var r=t(60319),i=t(57103),a=r.ZP.div.withConfig({displayName:"Version",componentId:"sc-5deipg-0"})(["font-family:",";font-size:16px;overflow:hidden;text-overflow:ellipsis;"],i.b.monospace)},51294:function(e,n,t){t.d(n,{L:function(){return c}});var r=t(68079),i=t(276),a=t.n(i),s=t(78193),o="__NO_PARTITION__",l=function(e,n){return Number(null===n||void 0===n?void 0:n.timestamp)-Number(null===e||void 0===e?void 0:e.timestamp)},d=function(e,n){var t=a()(e,(function(e){return e.partition||o})),i=(0,r.Z)(n).reverse();return o in t&&i.push(o),i.filter((function(e){return e!==o})).map((function(e){var n=(0,r.Z)(t[e]||[]).sort(l),i=n.find((function(e){return"MaterializationEvent"===e.__typename}))||n[0]||null;return{all:n,latest:i,timestamp:null===i||void 0===i?void 0:i.timestamp,partition:e}}))};function c(e,n,t,i){return s.useMemo((function(){var a=[].concat((0,r.Z)(n),(0,r.Z)(t)).sort((function(e,n){return Number(n.timestamp)-Number(e.timestamp)}));return"partition"===e&&i?d(a,i):a.map((function(e){return{latest:e,partition:e.partition||void 0,timestamp:e.timestamp,all:[]}}))}),[i,n,t,e])}},44435:function(e,n,t){t.d(n,{T8:function(){return y},ZC:function(){return x},fE:function(){return f}});var r,i,a,s=t(71171),o=t(68079),l=t(90239),d=t(31623),c=t(23662),u=t.n(c),p=t(78193),h=t(84674),m=t(12478);function f(e,n,t){var r=t.assetHasDefinedPartitions,i=n.asOf?"".concat(Number(n.asOf)+1):void 0,a=r?"partition":"time",s=void 0!==n.partition?"partition":void 0!==n.time||i?"time":a,d=r&&"partition"===s,c=(0,l.a)(g,{variables:d?{assetKey:{path:e.path},before:i,partitionInLast:120}:{assetKey:{path:e.path},before:i,limit:100}}),h=c.data,m=c.loading,f=c.refetch;return p.useMemo((function(){var e,n="Asset"===(null===h||void 0===h?void 0:h.assetOrError.__typename)?null===h||void 0===h?void 0:h.assetOrError:null,t=(null===n||void 0===n?void 0:n.assetMaterializations)||[],r=(null===n||void 0===n?void 0:n.assetObservations)||[],i=null===n||void 0===n||null===(e=n.definition)||void 0===e?void 0:e.partitionKeys;return{asset:n,loadedPartitionKeys:d&&i?i.slice(i.length-120):u()([].concat((0,o.Z)(t),(0,o.Z)(r)).map((function(e){return e.partition})).filter(Boolean)).sort(),materializations:t,observations:r,loading:m,refetch:f,xAxis:s}}),[h,m,f,d,s])}var x=(0,d.Ps)(r||(r=(0,s.Z)(["\n  fragment AssetMaterializationFragment on MaterializationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        mode\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n        status\n        pipelineName\n        pipelineSnapshotId\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    label\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    assetLineage {\n      ...AssetLineageFragment\n    }\n  }\n\n  ","\n  ","\n"])),h.it,m.Q),y=(0,d.Ps)(i||(i=(0,s.Z)(["\n  fragment AssetObservationFragment on ObservationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        mode\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n        status\n        pipelineName\n        pipelineSnapshotId\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    label\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n  }\n\n  ","\n"])),h.it),g=(0,d.Ps)(a||(a=(0,s.Z)(["\n  query AssetEventsQuery(\n    $assetKey: AssetKeyInput!\n    $limit: Int\n    $before: String\n    $partitionInLast: Int\n  ) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n        assetObservations(\n          limit: $limit\n          beforeTimestampMillis: $before\n          partitionInLast: $partitionInLast\n        ) {\n          ...AssetObservationFragment\n        }\n        assetMaterializations(\n          limit: $limit\n          beforeTimestampMillis: $before\n          partitionInLast: $partitionInLast\n        ) {\n          ...AssetMaterializationFragment\n        }\n\n        definition {\n          id\n          partitionKeys\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"])),y,x)},44907:function(e,n,t){t.d(n,{Q:function(){return s}});var r=t(67445),i=(t(78193),t(9610)),a=t(35936),s=function(e){var n=e.isGraph,t=e.repoAddress,s=e.result;return"PipelineSnapshotNotFoundError"===s.__typename?(0,a.jsx)(r.t,{icon:"error",title:n?"Graph snapshot not found":"Pipeline snapshot not found",description:s.message}):"PipelineNotFoundError"===s.__typename?(0,a.jsx)(r.t,{icon:"error",title:n?"Graph not found":"Pipeline not found",description:s.message}):"RepositoryNotFoundError"===s.__typename?(0,a.jsx)(r.t,{icon:"error",title:"".concat(t?(0,i.Uz)(t):"Definitions"," not found"),description:s.message}):"PythonError"===s.__typename?(0,a.jsx)(r.t,{icon:"error",title:"Query error",description:s.message}):(0,a.jsx)("span",{})}}}]);
//# sourceMappingURL=129.72133081.chunk.js.map