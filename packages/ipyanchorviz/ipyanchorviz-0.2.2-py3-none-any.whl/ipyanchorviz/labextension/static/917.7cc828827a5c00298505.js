(self.webpackChunkipyanchorviz=self.webpackChunkipyanchorviz||[]).push([[917],{917:(t,n,r)=>{"use strict";r.r(n),r.d(n,{lasso:()=>d});var e=r(301),o=r(626),a=r(72),s=r(299);function i(t){return function(){return t}}function u(t,n,r,e,o,a,s,i,u,c){this.target=t,this.type=n,this.subject=r,this.identifier=e,this.active=o,this.x=a,this.y=s,this.dx=i,this.dy=u,this._=c}function c(){return!e.B.ctrlKey&&!e.B.button}function l(){return this.parentNode}function f(t){return null==t?{x:e.B.x,y:e.B.y}:t}function h(){return navigator.maxTouchPoints||"ontouchstart"in this}u.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var v=r(707),p=r.n(v);function d(){var t,n=[],r=75,v=!0,d=!1,g=!0,_={start:function(){},draw:function(){},end:function(){}};function y(y){var b,m,M,w,B=y.append("g").attr("class","lasso"),x=B.append("path").attr("class","drawn"),k=B.append("path").attr("class","loop_close"),E=B.append("circle").attr("class","origin"),S=function(){var t,n,r,v,p=c,d=l,g=f,_=h,y={},b=(0,o.Z)("start","drag","end"),m=0,M=0;function w(t){t.on("mousedown.drag",B).filter(_).on("touchstart.drag",E).on("touchmove.drag",S).on("touchend.drag touchcancel.drag",P).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function B(){if(!v&&p.apply(this,arguments)){var o=T("mouse",d.apply(this,arguments),e.Jz,this,arguments);o&&((0,e.Ys)(e.B.view).on("mousemove.drag",x,!0).on("mouseup.drag",k,!0),(0,a.Z)(e.B.view),(0,s.r)(),r=!1,t=e.B.clientX,n=e.B.clientY,o("start"))}}function x(){if((0,s.Z)(),!r){var o=e.B.clientX-t,a=e.B.clientY-n;r=o*o+a*a>M}y.mouse("drag")}function k(){(0,e.Ys)(e.B.view).on("mousemove.drag mouseup.drag",null),(0,a.D)(e.B.view,r),(0,s.Z)(),y.mouse("end")}function E(){if(p.apply(this,arguments)){var t,n,r=e.B.changedTouches,o=d.apply(this,arguments),a=r.length;for(t=0;t<a;++t)(n=T(r[t].identifier,o,e.Fq,this,arguments))&&((0,s.r)(),n("start"))}}function S(){var t,n,r=e.B.changedTouches,o=r.length;for(t=0;t<o;++t)(n=y[r[t].identifier])&&((0,s.Z)(),n("drag"))}function P(){var t,n,r=e.B.changedTouches,o=r.length;for(v&&clearTimeout(v),v=setTimeout((function(){v=null}),500),t=0;t<o;++t)(n=y[r[t].identifier])&&((0,s.r)(),n("end"))}function T(t,n,r,o,a){var s,i,c,l=r(n,t),f=b.copy();if((0,e._H)(new u(w,"beforestart",s,t,m,l[0],l[1],0,0,f),(function(){return null!=(e.B.subject=s=g.apply(o,a))&&(i=s.x-l[0]||0,c=s.y-l[1]||0,!0)})))return function h(v){var p,d=l;switch(v){case"start":y[t]=h,p=m++;break;case"end":delete y[t],--m;case"drag":l=r(n,t),p=m}(0,e._H)(new u(w,v,s,t,p,l[0]+i,l[1]+c,l[0]-d[0],l[1]-d[1],f),f.apply,f,[v,o,a])}}return w.filter=function(t){return arguments.length?(p="function"==typeof t?t:i(!!t),w):p},w.container=function(t){return arguments.length?(d="function"==typeof t?t:i(t),w):d},w.subject=function(t){return arguments.length?(g="function"==typeof t?t:i(t),w):g},w.touchable=function(t){return arguments.length?(_="function"==typeof t?t:i(!!t),w):_},w.on=function(){var t=b.on.apply(b,arguments);return t===b?w:t},w.clickDistance=function(t){return arguments.length?(M=(t=+t)*t,w):Math.sqrt(M)},w}().on("start",(function(){w=[],b="",x.attr("d",null),k.attr("d",null),n.nodes().forEach((function(t){t.__lasso.possible=!1,t.__lasso.selected=!1,t.__lasso.hoverSelect=!1,t.__lasso.loopSelect=!1;var n=t.getBoundingClientRect();t.__lasso.lassoPoint=[Math.round(n.left+n.width/2),Math.round(n.top+n.height/2)]})),g&&n.on("mouseover.lasso",(function(){this.__lasso.hoverSelect=!0})),_.start()})).on("drag",(function(){var t,o;"touchmove"===e.B.sourceEvent.type?(t=e.B.sourceEvent.touches[0].clientX,o=e.B.sourceEvent.touches[0].clientY):(t=e.B.sourceEvent.clientX,o=e.B.sourceEvent.clientY);var a=e.Jz(this)[0],s=e.Jz(this)[1];""===b?(b=b+"M "+a+" "+s,m=[t,o],M=[a,s],E.attr("cx",a).attr("cy",s).attr("r",7).attr("display",null)):b=b+" L "+a+" "+s,w.push([t,o]);var i=Math.sqrt(Math.pow(t-m[0],2)+Math.pow(o-m[1],2)),u="M "+a+" "+s+" L "+M[0]+" "+M[1];x.attr("d",b),k.attr("d",u),(d=i<=r)&&v?k.attr("display",null):k.attr("display","none"),n.nodes().forEach((function(t){t.__lasso.loopSelect=!(!d||!v)&&p()(w,t.__lasso.lassoPoint)<1,t.__lasso.possible=t.__lasso.hoverSelect||t.__lasso.loopSelect})),_.draw()})).on("end",(function(){n.on("mouseover.lasso",null),n.nodes().forEach((function(t){t.__lasso.selected=t.__lasso.possible,t.__lasso.possible=!1})),x.attr("d",null),k.attr("d",null),E.attr("display","none"),_.end()}));t.call(S)}return y.items=function(t){return arguments.length?((n=t).nodes().forEach((function(t){t.__lasso={possible:!1,selected:!1}})),y):n},y.possibleItems=function(){return n.filter((function(){return this.__lasso.possible}))},y.selectedItems=function(){return n.filter((function(){return this.__lasso.selected}))},y.notPossibleItems=function(){return n.filter((function(){return!this.__lasso.possible}))},y.notSelectedItems=function(){return n.filter((function(){return!this.__lasso.selected}))},y.closePathDistance=function(t){return arguments.length?(r=t,y):r},y.closePathSelect=function(t){return arguments.length?(v=!0===t,y):v},y.isPathClosed=function(t){return arguments.length?(d=!0===t,y):d},y.hoverSelect=function(t){return arguments.length?(g=!0===t,y):g},y.on=function(t,n){return arguments.length?1===arguments.length?_[t]:(["start","draw","end"].indexOf(t)>-1&&(_[t]=n),y):_},y.targetArea=function(n){return arguments.length?(t=n,y):t},y}},146:(t,n,r)=>{"use strict";var e=r(5),o=r(740),a=r(442),s=r(972);function i(t,n,r,e){return function(r,o,a){var s=t(t(n(o[1],a[0]),n(-a[1],o[0])),t(n(r[1],o[0]),n(-o[1],r[0]))),i=t(n(r[1],a[0]),n(-a[1],r[0])),u=e(s,i);return u[u.length-1]}}function u(t,n,r,e){return function(o,a,s,i){var u=t(t(r(t(n(s[1],i[0]),n(-i[1],s[0])),a[2]),t(r(t(n(a[1],i[0]),n(-i[1],a[0])),-s[2]),r(t(n(a[1],s[0]),n(-s[1],a[0])),i[2]))),t(r(t(n(a[1],i[0]),n(-i[1],a[0])),o[2]),t(r(t(n(o[1],i[0]),n(-i[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),i[2])))),c=t(t(r(t(n(s[1],i[0]),n(-i[1],s[0])),o[2]),t(r(t(n(o[1],i[0]),n(-i[1],o[0])),-s[2]),r(t(n(o[1],s[0]),n(-s[1],o[0])),i[2]))),t(r(t(n(a[1],s[0]),n(-s[1],a[0])),o[2]),t(r(t(n(o[1],s[0]),n(-s[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),s[2])))),l=e(u,c);return l[l.length-1]}}function c(t,n,r,e){return function(o,a,s,i,u){var c=t(t(t(r(t(r(t(n(i[1],u[0]),n(-u[1],i[0])),s[2]),t(r(t(n(s[1],u[0]),n(-u[1],s[0])),-i[2]),r(t(n(s[1],i[0]),n(-i[1],s[0])),u[2]))),a[3]),t(r(t(r(t(n(i[1],u[0]),n(-u[1],i[0])),a[2]),t(r(t(n(a[1],u[0]),n(-u[1],a[0])),-i[2]),r(t(n(a[1],i[0]),n(-i[1],a[0])),u[2]))),-s[3]),r(t(r(t(n(s[1],u[0]),n(-u[1],s[0])),a[2]),t(r(t(n(a[1],u[0]),n(-u[1],a[0])),-s[2]),r(t(n(a[1],s[0]),n(-s[1],a[0])),u[2]))),i[3]))),t(r(t(r(t(n(s[1],i[0]),n(-i[1],s[0])),a[2]),t(r(t(n(a[1],i[0]),n(-i[1],a[0])),-s[2]),r(t(n(a[1],s[0]),n(-s[1],a[0])),i[2]))),-u[3]),t(r(t(r(t(n(i[1],u[0]),n(-u[1],i[0])),a[2]),t(r(t(n(a[1],u[0]),n(-u[1],a[0])),-i[2]),r(t(n(a[1],i[0]),n(-i[1],a[0])),u[2]))),o[3]),r(t(r(t(n(i[1],u[0]),n(-u[1],i[0])),o[2]),t(r(t(n(o[1],u[0]),n(-u[1],o[0])),-i[2]),r(t(n(o[1],i[0]),n(-i[1],o[0])),u[2]))),-a[3])))),t(t(r(t(r(t(n(a[1],u[0]),n(-u[1],a[0])),o[2]),t(r(t(n(o[1],u[0]),n(-u[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),u[2]))),i[3]),t(r(t(r(t(n(a[1],i[0]),n(-i[1],a[0])),o[2]),t(r(t(n(o[1],i[0]),n(-i[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),i[2]))),-u[3]),r(t(r(t(n(s[1],i[0]),n(-i[1],s[0])),a[2]),t(r(t(n(a[1],i[0]),n(-i[1],a[0])),-s[2]),r(t(n(a[1],s[0]),n(-s[1],a[0])),i[2]))),o[3]))),t(r(t(r(t(n(s[1],i[0]),n(-i[1],s[0])),o[2]),t(r(t(n(o[1],i[0]),n(-i[1],o[0])),-s[2]),r(t(n(o[1],s[0]),n(-s[1],o[0])),i[2]))),-a[3]),t(r(t(r(t(n(a[1],i[0]),n(-i[1],a[0])),o[2]),t(r(t(n(o[1],i[0]),n(-i[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),i[2]))),s[3]),r(t(r(t(n(a[1],s[0]),n(-s[1],a[0])),o[2]),t(r(t(n(o[1],s[0]),n(-s[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),s[2]))),-i[3]))))),l=t(t(t(r(t(r(t(n(i[1],u[0]),n(-u[1],i[0])),s[2]),t(r(t(n(s[1],u[0]),n(-u[1],s[0])),-i[2]),r(t(n(s[1],i[0]),n(-i[1],s[0])),u[2]))),o[3]),r(t(r(t(n(i[1],u[0]),n(-u[1],i[0])),o[2]),t(r(t(n(o[1],u[0]),n(-u[1],o[0])),-i[2]),r(t(n(o[1],i[0]),n(-i[1],o[0])),u[2]))),-s[3])),t(r(t(r(t(n(s[1],u[0]),n(-u[1],s[0])),o[2]),t(r(t(n(o[1],u[0]),n(-u[1],o[0])),-s[2]),r(t(n(o[1],s[0]),n(-s[1],o[0])),u[2]))),i[3]),r(t(r(t(n(s[1],i[0]),n(-i[1],s[0])),o[2]),t(r(t(n(o[1],i[0]),n(-i[1],o[0])),-s[2]),r(t(n(o[1],s[0]),n(-s[1],o[0])),i[2]))),-u[3]))),t(t(r(t(r(t(n(s[1],u[0]),n(-u[1],s[0])),a[2]),t(r(t(n(a[1],u[0]),n(-u[1],a[0])),-s[2]),r(t(n(a[1],s[0]),n(-s[1],a[0])),u[2]))),o[3]),r(t(r(t(n(s[1],u[0]),n(-u[1],s[0])),o[2]),t(r(t(n(o[1],u[0]),n(-u[1],o[0])),-s[2]),r(t(n(o[1],s[0]),n(-s[1],o[0])),u[2]))),-a[3])),t(r(t(r(t(n(a[1],u[0]),n(-u[1],a[0])),o[2]),t(r(t(n(o[1],u[0]),n(-u[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),u[2]))),s[3]),r(t(r(t(n(a[1],s[0]),n(-s[1],a[0])),o[2]),t(r(t(n(o[1],s[0]),n(-s[1],o[0])),-a[2]),r(t(n(o[1],a[0]),n(-a[1],o[0])),s[2]))),-u[3])))),f=e(c,l);return f[f.length-1]}}function l(t){return(3===t?i:4===t?u:c)(o,e,a,s)}var f=l(3),h=l(4),v=[function(){return 0},function(){return 0},function(t,n){return n[0]-t[0]},function(t,n,r){var e,o=(t[1]-r[1])*(n[0]-r[0]),a=(t[0]-r[0])*(n[1]-r[1]),s=o-a;if(o>0){if(a<=0)return s;e=o+a}else{if(!(o<0))return s;if(a>=0)return s;e=-(o+a)}var i=33306690738754716e-32*e;return s>=i||s<=-i?s:f(t,n,r)},function(t,n,r,e){var o=t[0]-e[0],a=n[0]-e[0],s=r[0]-e[0],i=t[1]-e[1],u=n[1]-e[1],c=r[1]-e[1],l=t[2]-e[2],f=n[2]-e[2],v=r[2]-e[2],p=a*c,d=s*u,g=s*i,_=o*c,y=o*u,b=a*i,m=l*(p-d)+f*(g-_)+v*(y-b),M=7771561172376103e-31*((Math.abs(p)+Math.abs(d))*Math.abs(l)+(Math.abs(g)+Math.abs(_))*Math.abs(f)+(Math.abs(y)+Math.abs(b))*Math.abs(v));return m>M||-m>M?m:h(t,n,r,e)}];function p(t){var n=v[t.length];return n||(n=v[t.length]=l(t.length)),n.apply(void 0,t)}function d(t,n,r,e,o,a,s){return function(n,r,i,u,c){switch(arguments.length){case 0:case 1:return 0;case 2:return e(n,r);case 3:return o(n,r,i);case 4:return a(n,r,i,u);case 5:return s(n,r,i,u,c)}for(var l=new Array(arguments.length),f=0;f<arguments.length;++f)l[f]=arguments[f];return t(l)}}!function(){for(;v.length<=5;)v.push(l(v.length));t.exports=d.apply(void 0,[p].concat(v));for(var n=0;n<=5;++n)t.exports[n]=v[n]}()},707:(t,n,r)=>{t.exports=function(t,n){for(var r=n[0],o=n[1],a=t.length,s=1,i=a,u=0,c=a-1;u<i;c=u++){var l=t[u],f=t[c],h=l[1],v=f[1];if(v<h){if(v<o&&o<h){if(0===(p=e(l,f,n)))return 0;s^=0<p|0}else if(o===h&&h<t[(u+1)%a][1]){if(0===(p=e(l,f,n)))return 0;s^=0<p|0}}else if(h<v){if(h<o&&o<v){if(0===(p=e(l,f,n)))return 0;s^=p<0|0}else if(o===h&&t[(u+1)%a][1]<h){var p;if(0===(p=e(l,f,n)))return 0;s^=p<0|0}}else if(o===h){var d=Math.min(l[0],f[0]),g=Math.max(l[0],f[0]);if(0===u){for(;c>0;){var _=(c+a-1)%a;if((m=t[_])[1]!==o)break;var y=m[0];d=Math.min(d,y),g=Math.max(g,y),c=_}if(0===c)return d<=r&&r<=g?0:1;i=c+1}for(var b=t[(c+a-1)%a][1];u+1<i;){var m;if((m=t[u+1])[1]!==o)break;y=m[0],d=Math.min(d,y),g=Math.max(g,y),u+=1}if(d<=r&&r<=g)return 0;var M=t[(u+1)%a][1];r<d&&b<o!=M<o&&(s^=1)}}return 2*s-1};var e=r(146)},442:(t,n,r)=>{"use strict";var e=r(5),o=r(359);t.exports=function(t,n){var r=t.length;if(1===r){var a=e(t[0],n);return a[0]?a:[a[1]]}var s=new Array(2*r),i=[.1,.1],u=[.1,.1],c=0;e(t[0],n,i),i[0]&&(s[c++]=i[0]);for(var l=1;l<r;++l){e(t[l],n,u);var f=i[1];o(f,u[0],i),i[0]&&(s[c++]=i[0]);var h=u[1],v=i[1],p=h+v,d=v-(p-h);i[1]=p,d&&(s[c++]=d)}return i[1]&&(s[c++]=i[1]),0===c&&(s[c++]=0),s.length=c,s}},972:t=>{"use strict";t.exports=function(t,n){var r=0|t.length,e=0|n.length;if(1===r&&1===e)return function(t,n){var r=t+n,e=r-t,o=t-(r-e)+(n-e);return o?[o,r]:[r]}(t[0],-n[0]);var o,a,s=new Array(r+e),i=0,u=0,c=0,l=Math.abs,f=t[u],h=l(f),v=-n[c],p=l(v);h<p?(a=f,(u+=1)<r&&(h=l(f=t[u]))):(a=v,(c+=1)<e&&(p=l(v=-n[c]))),u<r&&h<p||c>=e?(o=f,(u+=1)<r&&(h=l(f=t[u]))):(o=v,(c+=1)<e&&(p=l(v=-n[c])));for(var d,g,_=o+a,y=_-o,b=a-y,m=b,M=_;u<r&&c<e;)h<p?(o=f,(u+=1)<r&&(h=l(f=t[u]))):(o=v,(c+=1)<e&&(p=l(v=-n[c]))),(b=(a=m)-(y=(_=o+a)-o))&&(s[i++]=b),m=M-((d=M+_)-(g=d-M))+(_-g),M=d;for(;u<r;)(b=(a=m)-(y=(_=(o=f)+a)-o))&&(s[i++]=b),m=M-((d=M+_)-(g=d-M))+(_-g),M=d,(u+=1)<r&&(f=t[u]);for(;c<e;)(b=(a=m)-(y=(_=(o=v)+a)-o))&&(s[i++]=b),m=M-((d=M+_)-(g=d-M))+(_-g),M=d,(c+=1)<e&&(v=-n[c]);return m&&(s[i++]=m),M&&(s[i++]=M),i||(s[i++]=0),s.length=i,s}},740:t=>{"use strict";t.exports=function(t,n){var r=0|t.length,e=0|n.length;if(1===r&&1===e)return function(t,n){var r=t+n,e=r-t,o=t-(r-e)+(n-e);return o?[o,r]:[r]}(t[0],n[0]);var o,a,s=new Array(r+e),i=0,u=0,c=0,l=Math.abs,f=t[u],h=l(f),v=n[c],p=l(v);h<p?(a=f,(u+=1)<r&&(h=l(f=t[u]))):(a=v,(c+=1)<e&&(p=l(v=n[c]))),u<r&&h<p||c>=e?(o=f,(u+=1)<r&&(h=l(f=t[u]))):(o=v,(c+=1)<e&&(p=l(v=n[c])));for(var d,g,_=o+a,y=_-o,b=a-y,m=b,M=_;u<r&&c<e;)h<p?(o=f,(u+=1)<r&&(h=l(f=t[u]))):(o=v,(c+=1)<e&&(p=l(v=n[c]))),(b=(a=m)-(y=(_=o+a)-o))&&(s[i++]=b),m=M-((d=M+_)-(g=d-M))+(_-g),M=d;for(;u<r;)(b=(a=m)-(y=(_=(o=f)+a)-o))&&(s[i++]=b),m=M-((d=M+_)-(g=d-M))+(_-g),M=d,(u+=1)<r&&(f=t[u]);for(;c<e;)(b=(a=m)-(y=(_=(o=v)+a)-o))&&(s[i++]=b),m=M-((d=M+_)-(g=d-M))+(_-g),M=d,(c+=1)<e&&(v=n[c]);return m&&(s[i++]=m),M&&(s[i++]=M),i||(s[i++]=0),s.length=i,s}},5:t=>{"use strict";t.exports=function(t,r,e){var o=t*r,a=n*t,s=a-(a-t),i=t-s,u=n*r,c=u-(u-r),l=r-c,f=i*l-(o-s*c-i*c-s*l);return e?(e[0]=f,e[1]=o,e):[f,o]};var n=+(Math.pow(2,27)+1)},359:t=>{"use strict";t.exports=function(t,n,r){var e=t+n,o=e-t,a=n-o,s=t-(e-o);return r?(r[0]=s+a,r[1]=e,r):[s+a,e]}}}]);