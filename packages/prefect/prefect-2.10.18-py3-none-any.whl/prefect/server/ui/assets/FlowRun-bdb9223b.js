import{d as x,r as h,c as r,o as n,h as V,I as g,i as w,u as a,_ as z,a0 as y,a1 as A,q as G,E as O,v as U,a2 as Z,a3 as $,a4 as j,b as q,a5 as M,a6 as H,a7 as J,a8 as K,e as R,f as t,w as o,a9 as Q,g as u,aa as W,ab as X,ac as Y,ad as ee,ae,af as le,ag as ne,l as se,Z as k,ah as te}from"./index-4468920c.js";import{u as oe}from"./usePageTitle-74c1d73f.js";const ue={class:"flow-run-graphs__panel-content"},re=x({__name:"FlowRunGraphs",props:{flowRun:{}},setup(F){const c=h(!1),p=h(null),e=h(!1),f=r(()=>({root:{"flow-run-graphs--fullscreen":c.value},graph:{"flow-run-graphs__graphs--panel-open":e.value},panel:{"flow-run-graphs__panel-container--panel-open":e.value}}));function v(s){p.value=s,e.value=!!s}function m(){e.value=!1}return(s,i)=>(n(),V("div",{class:y(["flow-run-graphs",f.value.root])},[g("div",{class:y(["flow-run-graphs__graphs",f.value.graph])},[w(a(z),{class:"flow-run-graphs__timeline","flow-run":s.flowRun,height:"340px","selected-node":p.value,onSelection:v,"onUpdate:fullscreen":i[0]||(i[0]=d=>c.value=d)},null,8,["flow-run","selected-node"])],2),g("div",{class:y(["flow-run-graphs__panel-container",f.value.panel])},[g("div",ue,[w(a(A),{"selected-node":p.value,floating:c.value,onDismiss:m},null,8,["selected-node","floating"])])],2)],2))}});const fe=x({__name:"FlowRun",setup(F){const c=G(),p=O("flowRunId");U();const{flowRun:e,subscription:f}=Z(p,{interval:5e3}),v=r(()=>{var l;return(l=e.value)==null?void 0:l.deploymentId}),{deployment:m}=$(v),s=r(()=>{var l;return(l=e.value)!=null&&l.stateType?j(e.value.stateType):!0}),i=r(()=>[{label:"Logs"},{label:"Task Runs",hidden:s.value},{label:"Subflow Runs",hidden:s.value},{label:"Results",hidden:s.value},{label:"Artifacts",hidden:s.value},{label:"Details"},{label:"Parameters"}]),{tab:d,tabs:T}=q(i,"Logs");M(p,(l,_)=>{l!==_&&(d.value="Logs")});const E=r(()=>{var l;return((l=e.value)==null?void 0:l.parameters)??{}}),I=r(()=>{var l;return((l=m.value)==null?void 0:l.parameterOpenApiSchema)??{}}),b=r(()=>H(E.value,I.value));function P(){c.push(k.flowRuns())}const C=r(()=>{var l;return(l=e.value)==null?void 0:l.stateType});J(C);const N=r(()=>e.value?`Flow Run: ${e.value.name}`:"Flow Run");return oe(N),K(()=>{f.error&&te(f.error).isInRange("clientError")&&c.replace(k[404]())}),(l,_)=>{const S=R("p-code-highlight"),B=R("p-tabs"),D=R("p-layout-default");return n(),t(D,{class:"flow-run"},{header:o(()=>[a(e)?(n(),t(a(Q),{key:0,"flow-run-id":a(e).id,onDelete:P},null,8,["flow-run-id"])):u("",!0)]),default:o(()=>[a(e)&&!s.value?(n(),t(re,{key:0,"flow-run":a(e)},null,8,["flow-run"])):u("",!0),w(B,{selected:a(d),"onUpdate:selected":_[0]||(_[0]=L=>se(d)?d.value=L:null),tabs:a(T)},{details:o(()=>[a(e)?(n(),t(a(W),{key:0,"flow-run":a(e)},null,8,["flow-run"])):u("",!0)]),logs:o(()=>[a(e)?(n(),t(a(X),{key:0,"flow-run":a(e)},null,8,["flow-run"])):u("",!0)]),results:o(()=>[a(e)?(n(),t(a(Y),{key:0,"flow-run":a(e)},null,8,["flow-run"])):u("",!0)]),artifacts:o(()=>[a(e)?(n(),t(a(ee),{key:0,"flow-run":a(e)},null,8,["flow-run"])):u("",!0)]),"task-runs":o(()=>[a(e)?(n(),t(a(ae),{key:0,"flow-run-id":a(e).id},null,8,["flow-run-id"])):u("",!0)]),"subflow-runs":o(()=>[a(e)?(n(),t(a(le),{key:0,"flow-run-id":a(e).id},null,8,["flow-run-id"])):u("",!0)]),parameters:o(()=>[a(e)?(n(),t(a(ne),{key:0,"text-to-copy":b.value},{default:o(()=>[w(S,{lang:"json",text:b.value,class:"flow-run__parameters"},null,8,["text"])]),_:1},8,["text-to-copy"])):u("",!0)]),_:1},8,["selected","tabs"])]),_:1})}}});export{fe as default};
