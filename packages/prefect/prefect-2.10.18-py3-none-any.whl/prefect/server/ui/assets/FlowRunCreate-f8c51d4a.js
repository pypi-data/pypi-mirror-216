import{aJ as g,d as h,v as N,E as k,q as S,aK as x,a3 as D,c as F,e as I,u as e,f as J,w as m,g as O,o as T,i as p,aL as B,aM as M,aN as b,aO as E,Z as d,aH as i}from"./index-4468920c.js";import{u as P}from"./usePageTitle-74c1d73f.js";class U extends g{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const z=h({__name:"FlowRunCreate",setup(f){const t=N(),n=k("deploymentId"),s=S(),y=x("parameters",U,void 0),{deployment:a}=D(n),_=async r=>{var l,o;try{const u=await t.deployments.createDeploymentFlowRun(n.value,r),c=((o=(l=r.state)==null?void 0:l.stateDetails)==null?void 0:o.scheduledTime)??void 0,C=!c,v=b(E,{flowRun:u,flowRunRoute:d.flowRun,router:s,immediate:C,startTime:c});i(v,"success"),s.push(d.deployment(n.value))}catch(u){i("Something went wrong trying to create a flow run","error"),console.error(u)}},w=()=>{s.back()},R=F(()=>a.value?`Create Flow Run for Deployment: ${a.value.name}`:"Create Flow Run for Deployment");return P(R),(r,l)=>{const o=I("p-layout-default");return e(a)?(T(),J(o,{key:0},{header:m(()=>[p(e(B),{deployment:e(a)},null,8,["deployment"])]),default:m(()=>[p(e(M),{deployment:e(a),parameters:e(y),onSubmit:_,onCancel:w},null,8,["deployment","parameters"])]),_:1})):O("",!0)}}});export{z as default};
