aspects-job:
  user: root
  image: {{ DOCKER_IMAGE_ASPECTS }}
  volumes:
    - ../../env/plugins/aspects/apps:/app/aspects
  depends_on:
    - superset {% if RUN_CLICKHOUSE%}
    - clickhouse{% endif %}
    - ralph
clickhouse-job:
    image: {{DOCKER_IMAGE_CLICKHOUSE}}
    {% if RUN_CLICKHOUSE%}depends_on:
        - clickhouse
    {% endif %}

{% if RUN_SUPERSET %}
superset-job:
  {% include 'base-docker-compose-services' %}
    OPENEDX_LMS_ROOT_URL: "{% if ENABLE_HTTPS %}https{% else %}http{% endif %}://{{ LMS_HOST }}"
    OAUTH2_CLIENT_ID: {{ SUPERSET_OAUTH2_CLIENT_ID }}
  depends_on:
    - mysql
    - redis
    - superset
{% endif %}
