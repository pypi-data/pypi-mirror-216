import{r as l,R as k,j as n,g as R,u as Ee,D as te,o as Ce,s as ne,d as $e}from"./index-ad856934.js";import{E as m,b as Te,u as oe,c as Ae}from"./context-98478dbe.js";import{L as Oe}from"./editor-3fbec9d8.js";import De from"./ModelLineage-ca35cb8c.js";import{P as Me}from"./PlusIcon-8d70e023.js";import{l as V,j as ie,o as j,D as X,I as Y,y as Q,X as Z,a as T,O as ae,M as z,N as le,p as Se,g as Fe,i as Ie,R as Le,k as _e,s as Ge,r as se,u as We,f as Ue}from"./transition-9219299b.js";import{b as ze,M as ce}from"./dialog-f300575e.js";import{v as A,M as de,P as ue}from"./disclosure-690a567d.js";function Be({title:r,titleId:t,...e},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},e),r?l.createElement("title",{id:t},r):null,l.createElement("path",{fillRule:"evenodd",d:"M12 5.25c1.213 0 2.415.046 3.605.135a3.256 3.256 0 013.01 3.01c.044.583.077 1.17.1 1.759L17.03 8.47a.75.75 0 10-1.06 1.06l3 3a.75.75 0 001.06 0l3-3a.75.75 0 00-1.06-1.06l-1.752 1.751c-.023-.65-.06-1.296-.108-1.939a4.756 4.756 0 00-4.392-4.392 49.422 49.422 0 00-7.436 0A4.756 4.756 0 003.89 8.282c-.017.224-.033.447-.046.672a.75.75 0 101.497.092c.013-.217.028-.434.044-.651a3.256 3.256 0 013.01-3.01c1.19-.09 2.392-.135 3.605-.135zm-6.97 6.22a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.752-1.751c.023.65.06 1.296.108 1.939a4.756 4.756 0 004.392 4.392 49.413 49.413 0 007.436 0 4.756 4.756 0 004.392-4.392c.017-.223.032-.447.046-.672a.75.75 0 00-1.497-.092c-.013.217-.028.434-.044.651a3.256 3.256 0 01-3.01 3.01 47.953 47.953 0 01-7.21 0 3.256 3.256 0 01-3.01-3.01 47.759 47.759 0 01-.1-1.759L6.97 15.53a.75.75 0 001.06-1.06l-3-3z",clipRule:"evenodd"}))}const He=l.forwardRef(Be),me=He;function qe({title:r,titleId:t,...e},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},e),r?l.createElement("title",{id:t},r):null,l.createElement("path",{fillRule:"evenodd",d:"M3.75 12a.75.75 0 01.75-.75h15a.75.75 0 010 1.5h-15a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))}const Ke=l.forwardRef(qe),Je=Ke;function Ve({container:r,accept:t,walk:e,enabled:a=!0}){let s=l.useRef(t),c=l.useRef(e);l.useEffect(()=>{s.current=t,c.current=e},[t,e]),V(()=>{if(!r||!a)return;let i=ie(r);if(!i)return;let d=s.current,u=c.current,g=Object.assign(O=>d(O),{acceptNode:d}),N=i.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,g,!1);for(;N.nextNode();)u(N.currentNode)},[r,a,s,c])}function pe(r={},t=null,e=[]){for(let[a,s]of Object.entries(r))xe(e,fe(t,a),s);return e}function fe(r,t){return r?r+"["+t+"]":t}function xe(r,t,e){if(Array.isArray(e))for(let[a,s]of e.entries())xe(r,fe(t,a.toString()),s);else e instanceof Date?r.push([t,e.toISOString()]):typeof e=="boolean"?r.push([t,e?"1":"0"]):typeof e=="string"?r.push([t,e]):typeof e=="number"?r.push([t,`${e}`]):e==null?r.push([t,""]):pe(e,t,r)}function Xe(r){var t;let e=(t=r==null?void 0:r.form)!=null?t:r.closest("form");if(e){for(let a of e.elements)if(a.tagName==="INPUT"&&a.type==="submit"||a.tagName==="BUTTON"&&a.type==="submit"||a.nodeName==="INPUT"&&a.type==="image"){a.click();return}}}function Ye(r,t,e){let[a,s]=l.useState(e),c=r!==void 0,i=l.useRef(c),d=l.useRef(!1),u=l.useRef(!1);return c&&!i.current&&!d.current?(d.current=!0,i.current=c,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!c&&i.current&&!u.current&&(u.current=!0,i.current=c,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[c?r:a,j(g=>(c||s(g),t==null?void 0:t(g)))]}let he=l.createContext(null);function ve(){let r=l.useContext(he);if(r===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,ve),t}return r}function ge(){let[r,t]=l.useState([]);return[r.length>0?r.join(" "):void 0,l.useMemo(()=>function(e){let a=j(c=>(t(i=>[...i,c]),()=>t(i=>{let d=i.slice(),u=d.indexOf(c);return u!==-1&&d.splice(u,1),d}))),s=l.useMemo(()=>({register:a,slot:e.slot,name:e.name,props:e.props}),[a,e.slot,e.name,e.props]);return k.createElement(he.Provider,{value:s},e.children)},[t])]}let Qe="label";function Ze(r,t){let e=Y(),{id:a=`headlessui-label-${e}`,passive:s=!1,...c}=r,i=ve(),d=Q(t);V(()=>i.register(a),[a,i.register]);let u={ref:d,...i.props,id:a};return s&&("onClick"in u&&(delete u.htmlFor,delete u.onClick),"onClick"in c&&delete c.onClick),Z({ourProps:u,theirProps:c,slot:i.slot||{},defaultTag:Qe,name:i.name||"Label"})}let er=X(Ze),rr=Object.assign(er,{});var tr=(r=>(r[r.RegisterOption=0]="RegisterOption",r[r.UnregisterOption=1]="UnregisterOption",r))(tr||{});let nr={[0](r,t){let e=[...r.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...r,options:Ue(e,a=>a.element.current)}},[1](r,t){let e=r.options.slice(),a=r.options.findIndex(s=>s.id===t.id);return a===-1?r:(e.splice(a,1),{...r,options:e})}},ee=l.createContext(null);ee.displayName="RadioGroupDataContext";function be(r){let t=l.useContext(ee);if(t===null){let e=new Error(`<${r} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,be),e}return t}let re=l.createContext(null);re.displayName="RadioGroupActionsContext";function we(r){let t=l.useContext(re);if(t===null){let e=new Error(`<${r} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,we),e}return t}function ar(r,t){return We(t.type,nr,r,t)}let lr="div";function sr(r,t){let e=Y(),{id:a=`headlessui-radiogroup-${e}`,value:s,defaultValue:c,form:i,name:d,onChange:u,by:g=(o,x)=>o===x,disabled:N=!1,...O}=r,P=j(typeof g=="string"?(o,x)=>{let f=g;return(o==null?void 0:o[f])===(x==null?void 0:x[f])}:g),[D,M]=l.useReducer(ar,{options:[]}),h=D.options,[_,q]=ge(),[E,S]=ce(),F=l.useRef(null),K=Q(F,t),[v,G]=Ye(s,u,c),b=l.useMemo(()=>h.find(o=>!o.propsRef.current.disabled),[h]),C=l.useMemo(()=>h.some(o=>P(o.propsRef.current.value,v)),[h,v]),w=j(o=>{var x;if(N||P(o,v))return!1;let f=(x=h.find($=>P($.propsRef.current.value,o)))==null?void 0:x.propsRef.current;return f!=null&&f.disabled?!1:(G==null||G(o),!0)});Ve({container:F.current,accept(o){return o.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:o.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(o){o.setAttribute("role","none")}});let J=j(o=>{let x=F.current;if(!x)return;let f=ie(x),$=h.filter(p=>p.propsRef.current.disabled===!1).map(p=>p.element.current);switch(o.key){case T.Enter:Xe(o.currentTarget);break;case T.ArrowLeft:case T.ArrowUp:if(o.preventDefault(),o.stopPropagation(),ae($,z.Previous|z.WrapAround)===le.Success){let p=h.find(I=>I.element.current===(f==null?void 0:f.activeElement));p&&w(p.propsRef.current.value)}break;case T.ArrowRight:case T.ArrowDown:if(o.preventDefault(),o.stopPropagation(),ae($,z.Next|z.WrapAround)===le.Success){let p=h.find(I=>I.element.current===(f==null?void 0:f.activeElement));p&&w(p.propsRef.current.value)}break;case T.Space:{o.preventDefault(),o.stopPropagation();let p=h.find(I=>I.element.current===(f==null?void 0:f.activeElement));p&&w(p.propsRef.current.value)}break}}),y=j(o=>(M({type:0,...o}),()=>M({type:1,id:o.id}))),W=l.useMemo(()=>({value:v,firstOption:b,containsCheckedOption:C,disabled:N,compare:P,...D}),[v,b,C,N,P,D]),Ne=l.useMemo(()=>({registerOption:y,change:w}),[y,w]),ye={ref:K,id:a,role:"radiogroup","aria-labelledby":_,"aria-describedby":E,onKeyDown:J},ke=l.useMemo(()=>({value:v}),[v]),U=l.useRef(null),Pe=Se();return l.useEffect(()=>{U.current&&c!==void 0&&Pe.addEventListener(U.current,"reset",()=>{w(c)})},[U,w]),k.createElement(S,{name:"RadioGroup.Description"},k.createElement(q,{name:"RadioGroup.Label"},k.createElement(re.Provider,{value:Ne},k.createElement(ee.Provider,{value:W},d!=null&&v!=null&&pe({[d]:v}).map(([o,x],f)=>k.createElement(Fe,{features:Ie.Hidden,ref:f===0?$=>{var p;U.current=(p=$==null?void 0:$.closest("form"))!=null?p:null}:void 0,...Le({key:o,as:"input",type:"radio",checked:x!=null,hidden:!0,readOnly:!0,form:i,name:o,value:x})})),Z({ourProps:ye,theirProps:O,slot:ke,defaultTag:lr,name:"RadioGroup"})))))}var or=(r=>(r[r.Empty=1]="Empty",r[r.Active=2]="Active",r))(or||{});let ir="div";function cr(r,t){var e;let a=Y(),{id:s=`headlessui-radiogroup-option-${a}`,value:c,disabled:i=!1,...d}=r,u=l.useRef(null),g=Q(u,t),[N,O]=ge(),[P,D]=ce(),{addFlag:M,removeFlag:h,hasFlag:_}=_e(1),q=Ge({value:c,disabled:i}),E=be("RadioGroup.Option"),S=we("RadioGroup.Option");V(()=>S.registerOption({id:s,element:u,propsRef:q}),[s,S,u,r]);let F=j(y=>{var W;if(se(y.currentTarget))return y.preventDefault();S.change(c)&&(M(2),(W=u.current)==null||W.focus())}),K=j(y=>{if(se(y.currentTarget))return y.preventDefault();M(2)}),v=j(()=>h(2)),G=((e=E.firstOption)==null?void 0:e.id)===s,b=E.disabled||i,C=E.compare(E.value,c),w={ref:g,id:s,role:"radio","aria-checked":C?"true":"false","aria-labelledby":N,"aria-describedby":P,"aria-disabled":b?!0:void 0,tabIndex:(()=>b?-1:C||!E.containsCheckedOption&&G?0:-1)(),onClick:b?void 0:F,onFocus:b?void 0:K,onBlur:b?void 0:v},J=l.useMemo(()=>({checked:C,disabled:b,active:_(2)}),[C,b,_]);return k.createElement(D,{name:"RadioGroup.Description"},k.createElement(O,{name:"RadioGroup.Label"},Z({ourProps:w,theirProps:d,slot:J,defaultTag:ir,name:"RadioGroup.Option"})))}let dr=X(sr),ur=X(cr),B=Object.assign(dr,{Option:ur,Label:rr,Description:ze});function L({children:r,headline:t,type:e,className:a}){return n.jsxs("div",{className:R("flex flex-col rounded-md p-4 overflow-auto scrollbar scrollbar--vertical scrollbar--horizontal",e===m.Add&&"bg-success-10",e===m.Remove&&"bg-danger-10",e===m.Direct&&"bg-secondary-10",e===m.Indirect&&"bg-warning-10",e==="metadata"&&"bg-neutral-10",a),children:[t!=null&&n.jsx("h4",{className:R("mb-2 font-bold whitespace-nowrap",e===m.Add&&"text-success-600 dark:text-success-300",e===m.Remove&&"text-danger-600 dark:text-danger-300",e===m.Direct&&"text-secondary-600 dark:text-secondary-300",e===m.Indirect&&"text-warning-600 dark:text-warning-300",e===m.Metadata&&"text-neutral-600 dark:text-neutral-300"),children:t}),r]})}function mr({changes:r=[],type:t}){return n.jsx("ul",{children:r.map(e=>n.jsxs("li",{className:R("flex items-center px-1 leading-5",t===m.Add&&"text-success-600 dark:text-success-300",t===m.Remove&&"text-danger-600 dark:text-danger-300",t===m.Direct&&"text-secondary-600 dark:text-secondary-300",t===m.Indirect&&"text-warning-600 dark:text-warning-300",t===m.Metadata&&"text-neutral-600 dark:text-neutral-300"),children:[t===m.Add?n.jsx(Me,{className:"h-3 mr-2"}):t===m.Remove?n.jsx(Je,{className:"h-3 mr-2"}):n.jsx(me,{className:"h-4 mr-2"}),n.jsx("small",{children:e})]},e))})}function pr({changes:r=[]}){const t=Ee(e=>e.models);return n.jsx("ul",{children:r.map(e=>n.jsx("li",{className:"text-secondary-500 dark:text-primary-500",children:n.jsx(A,{children:({open:a})=>n.jsxs(n.Fragment,{children:[n.jsxs(A.Button,{className:"flex items-start w-full justify-between rounded-lg text-left",children:[n.jsx("div",{className:"w-full",children:n.jsx(H,{model_name:e.model_name})}),(()=>{const s=a?de:ue;return n.jsx(s,{className:"max-h-[1rem] min-w-[1rem] dark:text-primary-500 mt-0.5"})})()]}),n.jsxs(A.Panel,{className:"text-sm px-4 mb-4",children:[n.jsx(je,{type:"indirect",models:e.indirect??[]}),n.jsx(te,{className:"border-neutral-200 mt-2"}),n.jsx(fr,{change:e}),n.jsx(te,{className:"border-neutral-200 mt-2"}),(e==null?void 0:e.diff)!=null&&n.jsx(Re,{diff:e==null?void 0:e.diff}),(()=>{const s=t.get(e.model_name);return s==null?n.jsx(n.Fragment,{}):n.jsx("div",{className:"h-[16rem] bg-theme-lighter rounded-xl p-2",children:n.jsx(Oe,{withColumns:!1,children:n.jsx(De,{model:s,fingerprint:s.id,highlightedNodes:{"border-4 border-secondary-500":[s.name],"border-4 border-warning-500":e.indirect??[],"*":["opacity-50 hover:opacity-100"]}})})})})()]})]})})},e.model_name))})}function fr({change:r}){var c;const t=Te(),{change_categorization:e,categories:a}=oe(),s=Ce(i=>i.state);return n.jsx(B,{className:R("flex flex-col mt-2",s===ne.Finished?"opacity-50 cursor-not-allowed":"cursor-pointer"),value:(c=e.get(r.model_name))==null?void 0:c.category,onChange:i=>{t({type:Ae.Category,category:i,change:r})},disabled:s===ne.Finished,children:a.map(i=>n.jsx(B.Option,{value:i,className:()=>R("relative flex rounded-md"),children:({checked:d})=>n.jsxs("div",{className:R("text-sm flex px-2 py-1 w-full rounded-lg",d?"text-secondary-500 dark:text-primary-300":"text-prose"),children:[n.jsx("div",{className:"mt-[0.125rem] mr-2 border-2 border-neutral-400 min-w-[1rem] h-4 rounded-full flex justify-center items-center",children:d&&n.jsx("span",{className:"inline-block w-2 h-2 bg-secondary-500 dark:bg-primary-300 rounded-full"})}),n.jsxs("div",{children:[n.jsx(B.Label,{as:"p",children:i.name}),n.jsx(B.Description,{as:"span",className:"text-xs text-neutral-500",children:i.description})]})]})},i.name))})}function xr({changes:r=[]}){return n.jsx("ul",{children:r.map(t=>n.jsx("li",{className:"text-warning-700 dark:text-warning-500",children:$e(t.direct)?n.jsx(A,{children:({open:e})=>n.jsxs(n.Fragment,{children:[n.jsxs(A.Button,{className:"flex items-center w-full justify-between rounded-lg text-left",children:[n.jsx(H,{model_name:t.model_name}),(()=>{const a=e?de:ue;return n.jsx(a,{className:"max-h-[1rem] min-w-[1rem] dark:text-primary-500 mt-0.5"})})()]}),n.jsx(A.Panel,{className:"text-sm px-4 mb-4",children:n.jsx(je,{type:"direct",models:t.direct??[]})})]})}):n.jsx(H,{model_name:t.model_name})},t.model_name))})}function H({model_name:r}){var a;const{change_categorization:t}=oe(),e=(a=t.get(r))==null?void 0:a.category;return n.jsxs("div",{className:"flex items-center font-bold",children:[n.jsx(me,{className:"h-4 mr-2"}),n.jsx("small",{className:"inline-block text-sm ",children:r}),e!=null&&n.jsx("span",{className:"ml-2 text-xs px-1 bg-neutral-400 text-neutral-100  dark:bg-neutral-400 dark:text-neutral-800 rounded whitespace-nowrap mr-2",children:e.name})]})}function je({type:r,models:t}){return n.jsx("ul",{className:R("mt-2 ml-4",r==="indirect"&&"text-warning-700 dark:text-warning-500",r==="direct"&&"text-secondary-500 dark:text-primary-500"),children:t.map(e=>n.jsxs("li",{className:"flex",children:[n.jsx("span",{className:R("h-3 w-3 border-l-2 border-b-2 innline-block mr-2")}),e]},e))})}function Re({diff:r}){return n.jsx("div",{className:"my-4 bg-dark-lighter rounded-lg overflow-hidden",children:n.jsx("pre",{className:"p-4 text-primary-100 max-h-[30vh] overflow-auto scrollbar scrollbar--vertical scrollbar--horizontal",children:r.split(`
`).map((t,e)=>n.jsx("p",{className:R(t.startsWith("+")&&"text-success-500 bg-success-500/10 px-2",t.startsWith("-")&&"text-danger-500 bg-danger-500/10 px-2",t.startsWith("@@")&&"text-primary-300 my-5 px-2"),children:t},`${t}-${e}`))})})}L.Default=mr;L.Direct=pr;L.Indirect=xr;L.Diff=Re;L.Title=H;export{Ve as F,ge as H,rr as M,L as P,Ye as T,Xe as p};
